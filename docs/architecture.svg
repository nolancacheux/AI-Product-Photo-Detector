<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" font-family="system-ui, -apple-system, 'Segoe UI', sans-serif">
  <defs>
    <filter id="sh" x="-4%" y="-4%" width="108%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#94a3b8" flood-opacity="0.16"/>
    </filter>
    <filter id="sh-lg" x="-4%" y="-4%" width="108%" height="116%">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#7c3aed" flood-opacity="0.2"/>
    </filter>
    <filter id="glow" x="-10%" y="-10%" width="120%" height="120%">
      <feGaussianBlur stdDeviation="6" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <linearGradient id="cW" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#ffffff"/><stop offset="100%" stop-color="#f8fafc"/>
    </linearGradient>
    <linearGradient id="hubG" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#8b5cf6"/><stop offset="100%" stop-color="#6d28d9"/>
    </linearGradient>
    <radialGradient id="hubGlow" cx="50%" cy="50%" r="60%">
      <stop offset="0%" stop-color="#c4b5fd" stop-opacity="0.3"/><stop offset="100%" stop-color="#c4b5fd" stop-opacity="0"/>
    </radialGradient>
    <marker id="aG" viewBox="0 0 10 8" refX="9" refY="4" markerWidth="7" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,1 L8,4 L0,7 Z" fill="#059669"/>
    </marker>
    <marker id="aP" viewBox="0 0 10 8" refX="9" refY="4" markerWidth="7" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,1 L8,4 L0,7 Z" fill="#7c3aed"/>
    </marker>
    <marker id="aB" viewBox="0 0 10 8" refX="9" refY="4" markerWidth="7" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,1 L8,4 L0,7 Z" fill="#3b82f6"/>
    </marker>
    <marker id="aO" viewBox="0 0 10 8" refX="9" refY="4" markerWidth="7" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,1 L8,4 L0,7 Z" fill="#ea580c"/>
    </marker>
    <marker id="aR" viewBox="0 0 10 8" refX="9" refY="4" markerWidth="7" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,1 L8,4 L0,7 Z" fill="#dc2626"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="900" fill="#f8fafc"/>
  <rect x="0" y="0" width="240" height="3" fill="#059669"/>
  <rect x="240" y="0" width="240" height="3" fill="#7c3aed"/>
  <rect x="480" y="0" width="240" height="3" fill="#3b82f6"/>
  <rect x="720" y="0" width="240" height="3" fill="#ea580c"/>
  <rect x="960" y="0" width="240" height="3" fill="#dc2626"/>

  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-size="18" font-weight="700" fill="#0f172a">AI Product Photo Detector</text>
  <text x="600" y="47" text-anchor="middle" font-size="11" fill="#64748b">System Architecture - EfficientNet-B0 / FastAPI / Cloud Run / Terraform / MLOps</text>

  <!-- ============================================================= -->
  <!-- HUB: EfficientNet-B0 Model (center)                           -->
  <!-- ============================================================= -->
  <ellipse cx="600" cy="340" rx="120" ry="120" fill="url(#hubGlow)"/>
  <g filter="url(#sh-lg)">
    <rect x="505" y="280" width="190" height="120" rx="14" fill="url(#hubG)" stroke="#5b21b6" stroke-width="2"/>
  </g>
  <text x="600" y="306" text-anchor="middle" font-size="10" font-weight="600" fill="#e9d5ff" letter-spacing="1">TRAINED MODEL</text>
  <text x="600" y="330" text-anchor="middle" font-size="16" font-weight="800" fill="#ffffff">EfficientNet-B0</text>
  <text x="600" y="350" text-anchor="middle" font-size="10" fill="#e9d5ff">Binary classifier</text>
  <text x="600" y="365" text-anchor="middle" font-size="10" fill="#e9d5ff">Real vs AI-generated</text>
  <rect x="555" y="374" width="90" height="16" rx="4" fill="#5b21b6"/>
  <text x="600" y="386" text-anchor="middle" font-size="8.5" fill="#e9d5ff" font-weight="700">95%+ Accuracy</text>

  <!-- ============================================================= -->
  <!-- TOP-RIGHT: Data Pipeline (Green)                               -->
  <!-- ============================================================= -->
  <!-- Label -->
  <text x="980" y="76" text-anchor="middle" font-size="11" font-weight="700" fill="#065f46" letter-spacing="0.8">DATA PIPELINE</text>

  <!-- CIFAKE Dataset -->
  <g filter="url(#sh)">
    <rect x="850" y="86" width="200" height="80" rx="8" fill="url(#cW)" stroke="#a7f3d0" stroke-width="1"/>
    <rect x="850" y="86" width="200" height="4" rx="8" ry="2" fill="#059669"/>
  </g>
  <circle cx="868" cy="106" r="9" fill="#059669"/>
  <text x="868" y="110" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">D</text>
  <text x="883" y="109" font-size="11" font-weight="700" fill="#065f46">CIFAKE Dataset</text>
  <text x="862" y="124" font-size="9" fill="#475569">140K images (real + AI)</text>
  <rect x="862" y="136" width="162" height="16" rx="3" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="0.7"/>
  <text x="868" y="148" font-size="7.5" fill="#065f46" font-family="monospace">scripts/download_cifake.py</text>

  <!-- Data Processing -->
  <g filter="url(#sh)">
    <rect x="1060" y="86" width="120" height="80" rx="8" fill="url(#cW)" stroke="#a7f3d0" stroke-width="1"/>
    <rect x="1060" y="86" width="120" height="4" rx="8" ry="2" fill="#059669"/>
  </g>
  <circle cx="1078" cy="106" r="9" fill="#059669"/>
  <text x="1078" y="110" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">P</text>
  <text x="1093" y="109" font-size="10" font-weight="700" fill="#065f46">Processing</text>
  <text x="1072" y="124" font-size="9" fill="#475569">Augmentation</text>
  <rect x="1072" y="136" width="96" height="16" rx="3" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="0.7"/>
  <text x="1078" y="148" font-size="7" fill="#065f46" font-family="monospace">src/training/dataset.py</text>

  <!-- DVC Pipeline -->
  <g filter="url(#sh)">
    <rect x="920" y="178" width="165" height="72" rx="8" fill="url(#cW)" stroke="#a7f3d0" stroke-width="1"/>
    <rect x="920" y="178" width="165" height="4" rx="8" ry="2" fill="#059669"/>
  </g>
  <circle cx="938" cy="198" r="9" fill="#059669"/>
  <text x="938" y="202" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">V</text>
  <text x="953" y="201" font-size="11" font-weight="700" fill="#065f46">DVC Pipeline</text>
  <text x="932" y="216" font-size="9" fill="#475569">Versioned data + models</text>
  <rect x="932" y="228" width="62" height="16" rx="3" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="0.7"/>
  <text x="938" y="240" font-size="7.5" fill="#065f46" font-family="monospace">dvc.yaml</text>

  <!-- Green arrows: CIFAKE -> Processing, both -> DVC -->
  <line x1="1050" y1="126" x2="1060" y2="126" stroke="#059669" stroke-width="1.8" marker-end="url(#aG)"/>
  <path d="M950 166 C950 172, 990 178, 1000 185" stroke="#059669" stroke-width="1.8" fill="none" marker-end="url(#aG)"/>
  <path d="M1100 166 C1100 172, 1060 178, 1050 185" stroke="#059669" stroke-width="1.8" fill="none" marker-end="url(#aG)"/>

  <!-- Green arrow: DVC -> Model hub -->
  <path d="M920 220 C820 225, 730 260, 680 280" stroke="#059669" stroke-width="2" fill="none" marker-end="url(#aG)"/>

  <!-- ============================================================= -->
  <!-- LEFT: Training Pipeline (Purple)                               -->
  <!-- ============================================================= -->
  <text x="135" y="188" text-anchor="middle" font-size="11" font-weight="700" fill="#4c1d95" letter-spacing="0.8">TRAINING</text>

  <!-- Local Training -->
  <g filter="url(#sh)">
    <rect x="28" y="200" width="210" height="78" rx="8" fill="url(#cW)" stroke="#c4b5fd" stroke-width="1"/>
    <rect x="28" y="200" width="210" height="4" rx="8" ry="2" fill="#7c3aed"/>
  </g>
  <circle cx="46" cy="220" r="9" fill="#7c3aed"/>
  <text x="46" y="224" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">L</text>
  <text x="61" y="223" font-size="11" font-weight="700" fill="#4c1d95">Local Training</text>
  <text x="40" y="238" font-size="9" fill="#475569">Docker, CPU/GPU dev</text>
  <rect x="40" y="252" width="148" height="15" rx="3" fill="#faf5ff" stroke="#c4b5fd" stroke-width="0.7"/>
  <text x="46" y="263" font-size="7" fill="#4c1d95" font-family="monospace">docker/Dockerfile.training</text>

  <!-- Google Colab -->
  <g filter="url(#sh)">
    <rect x="28" y="292" width="210" height="78" rx="8" fill="url(#cW)" stroke="#c4b5fd" stroke-width="1"/>
    <rect x="28" y="292" width="210" height="4" rx="8" ry="2" fill="#7c3aed"/>
  </g>
  <circle cx="46" cy="312" r="9" fill="#7c3aed"/>
  <text x="46" y="316" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">C</text>
  <text x="61" y="315" font-size="11" font-weight="700" fill="#4c1d95">Google Colab</text>
  <text x="40" y="330" font-size="9" fill="#475569">Free T4 GPU, notebook</text>
  <rect x="40" y="344" width="158" height="15" rx="3" fill="#faf5ff" stroke="#c4b5fd" stroke-width="0.7"/>
  <text x="46" y="355" font-size="7" fill="#4c1d95" font-family="monospace">notebooks/train_colab.ipynb</text>

  <!-- Vertex AI -->
  <g filter="url(#sh)">
    <rect x="28" y="384" width="210" height="78" rx="8" fill="url(#cW)" stroke="#c4b5fd" stroke-width="1"/>
    <rect x="28" y="384" width="210" height="4" rx="8" ry="2" fill="#7c3aed"/>
  </g>
  <circle cx="46" cy="404" r="9" fill="#7c3aed"/>
  <text x="46" y="408" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">V</text>
  <text x="61" y="407" font-size="11" font-weight="700" fill="#4c1d95">Vertex AI</text>
  <text x="40" y="422" font-size="9" fill="#475569">Production, managed GPU</text>
  <rect x="40" y="436" width="162" height="15" rx="3" fill="#faf5ff" stroke="#c4b5fd" stroke-width="0.7"/>
  <text x="46" y="447" font-size="7" fill="#4c1d95" font-family="monospace">src/training/vertex_submit.py</text>

  <!-- MLflow + GCS (between training and hub) -->
  <g filter="url(#sh)">
    <rect x="285" y="255" width="150" height="38" rx="7" fill="url(#cW)" stroke="#c4b5fd" stroke-width="1"/>
    <rect x="285" y="255" width="150" height="3" rx="7" ry="2" fill="#7c3aed"/>
  </g>
  <circle cx="300" cy="274" r="7" fill="#7c3aed"/>
  <text x="300" y="277" text-anchor="middle" font-size="6.5" font-weight="700" fill="#fff">M</text>
  <text x="312" y="277" font-size="9.5" font-weight="700" fill="#4c1d95">MLflow Tracking</text>

  <g filter="url(#sh)">
    <rect x="285" y="302" width="150" height="38" rx="7" fill="url(#cW)" stroke="#c4b5fd" stroke-width="1"/>
    <rect x="285" y="302" width="150" height="3" rx="7" ry="2" fill="#7c3aed"/>
  </g>
  <circle cx="300" cy="321" r="7" fill="#7c3aed"/>
  <text x="300" y="324" text-anchor="middle" font-size="6.5" font-weight="700" fill="#fff">G</text>
  <text x="312" y="324" font-size="9.5" font-weight="700" fill="#4c1d95">GCS Registry</text>

  <!-- Purple arrows: Training -> MLflow/GCS -> Hub -->
  <path d="M238 240 C260 240, 270 270, 285 274" stroke="#7c3aed" stroke-width="1.8" fill="none" marker-end="url(#aP)"/>
  <path d="M238 331 C260 331, 270 321, 285 321" stroke="#7c3aed" stroke-width="1.8" fill="none" marker-end="url(#aP)"/>
  <path d="M238 423 C270 423, 280 380, 285 340" stroke="#7c3aed" stroke-width="1.8" fill="none"/>

  <!-- MLflow/GCS -> Hub -->
  <path d="M435 274 C460 274, 480 290, 505 300" stroke="#7c3aed" stroke-width="2" fill="none" marker-end="url(#aP)"/>
  <path d="M435 321 C460 321, 480 330, 505 335" stroke="#7c3aed" stroke-width="2" fill="none" marker-end="url(#aP)"/>

  <!-- ============================================================= -->
  <!-- BOTTOM-CENTER: Inference API (Blue)                            -->
  <!-- ============================================================= -->
  <text x="600" y="438" text-anchor="middle" font-size="11" font-weight="700" fill="#1e40af" letter-spacing="0.8">INFERENCE API</text>

  <!-- FastAPI Server (center below hub) -->
  <g filter="url(#sh)">
    <rect x="480" y="450" width="240" height="88" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="480" y="450" width="240" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="500" cy="472" r="10" fill="#3b82f6"/>
  <text x="500" y="476" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">A</text>
  <text x="516" y="475" font-size="12" font-weight="700" fill="#1e40af">FastAPI Server</text>
  <text x="492" y="492" font-size="9.5" fill="#475569">REST API, auth, rate limiting</text>
  <text x="492" y="506" font-size="9.5" fill="#475569">Single, batch, explain endpoints</text>
  <rect x="492" y="516" width="130" height="16" rx="3" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.7"/>
  <text x="498" y="528" font-size="7.5" fill="#1e40af" font-family="monospace">src/inference/api.py</text>

  <!-- Predictor (left of FastAPI) -->
  <g filter="url(#sh)">
    <rect x="285" y="470" width="170" height="78" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="285" y="470" width="170" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="303" cy="490" r="9" fill="#3b82f6"/>
  <text x="303" y="494" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">P</text>
  <text x="318" y="493" font-size="10.5" font-weight="700" fill="#1e40af">Predictor</text>
  <text x="297" y="509" font-size="9" fill="#475569">Real-time classification</text>
  <rect x="297" y="522" width="148" height="15" rx="3" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.7"/>
  <text x="303" y="533" font-size="7" fill="#1e40af" font-family="monospace">src/inference/predictor.py</text>

  <!-- Grad-CAM (right of FastAPI) -->
  <g filter="url(#sh)">
    <rect x="745" y="470" width="180" height="78" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="745" y="470" width="180" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="763" cy="490" r="9" fill="#3b82f6"/>
  <text x="763" y="494" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">E</text>
  <text x="778" y="493" font-size="10.5" font-weight="700" fill="#1e40af">Grad-CAM Explainer</text>
  <text x="757" y="509" font-size="9" fill="#475569">Visual heatmap explanations</text>
  <rect x="757" y="522" width="158" height="15" rx="3" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.7"/>
  <text x="763" y="533" font-size="7" fill="#1e40af" font-family="monospace">src/inference/explainer.py</text>

  <!-- Blue arrow: Hub -> FastAPI -->
  <path d="M600 400 C600 420, 600 435, 600 450" stroke="#3b82f6" stroke-width="2.2" fill="none" marker-end="url(#aB)"/>

  <!-- Blue arrows: FastAPI <-> Predictor, FastAPI <-> Explainer -->
  <path d="M480 494 C465 494, 462 494, 455 494" stroke="#3b82f6" stroke-width="1.8" fill="none" marker-end="url(#aB)" transform="scale(-1,1) translate(-935,0)"/>
  <line x1="720" y1="494" x2="745" y2="494" stroke="#3b82f6" stroke-width="1.8" marker-end="url(#aB)"/>

  <!-- ============================================================= -->
  <!-- BOTTOM-LEFT: Cloud Deployment (Blue)                           -->
  <!-- ============================================================= -->
  <text x="190" y="590" text-anchor="middle" font-size="11" font-weight="700" fill="#1e40af" letter-spacing="0.8">DEPLOYMENT</text>

  <!-- Docker -->
  <g filter="url(#sh)">
    <rect x="28" y="602" width="155" height="78" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="28" y="602" width="155" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="46" cy="622" r="9" fill="#3b82f6"/>
  <text x="46" y="626" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">D</text>
  <text x="60" y="625" font-size="10.5" font-weight="700" fill="#1e40af">Docker</text>
  <text x="40" y="641" font-size="9" fill="#475569">Multi-stage build</text>
  <rect x="40" y="655" width="106" height="15" rx="3" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.7"/>
  <text x="46" y="666" font-size="7" fill="#1e40af" font-family="monospace">docker/Dockerfile</text>

  <!-- Cloud Run -->
  <g filter="url(#sh)">
    <rect x="196" y="602" width="155" height="78" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="196" y="602" width="155" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="214" cy="622" r="9" fill="#3b82f6"/>
  <text x="214" y="626" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">R</text>
  <text x="228" y="625" font-size="10.5" font-weight="700" fill="#1e40af">Cloud Run</text>
  <text x="208" y="641" font-size="9" fill="#475569">Serverless, auto-scaling</text>

  <!-- Terraform -->
  <g filter="url(#sh)">
    <rect x="28" y="694" width="155" height="68" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="28" y="694" width="155" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="46" cy="714" r="9" fill="#3b82f6"/>
  <text x="46" y="718" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">T</text>
  <text x="60" y="717" font-size="10.5" font-weight="700" fill="#1e40af">Terraform IaC</text>
  <text x="40" y="733" font-size="9" fill="#475569">Modular infrastructure</text>
  <rect x="40" y="742" width="64" height="15" rx="3" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.7"/>
  <text x="46" y="753" font-size="7" fill="#1e40af" font-family="monospace">terraform/</text>

  <!-- Deployment internal arrows -->
  <line x1="183" y1="641" x2="196" y2="641" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#aB)"/>
  <path d="M105 694 C105 688, 273 688, 273 680" stroke="#3b82f6" stroke-width="1.3" fill="none" marker-end="url(#aB)"/>

  <!-- Blue arrow: FastAPI -> Deployment -->
  <path d="M480 520 C400 540, 300 560, 270 602" stroke="#3b82f6" stroke-width="1.8" fill="none" marker-end="url(#aB)"/>

  <!-- ============================================================= -->
  <!-- BOTTOM-RIGHT: Monitoring (Orange)                              -->
  <!-- ============================================================= -->
  <text x="990" y="490" text-anchor="middle" font-size="11" font-weight="700" fill="#7c2d12" letter-spacing="0.8">MONITORING</text>

  <!-- Prometheus -->
  <g filter="url(#sh)">
    <rect x="960" y="502" width="210" height="78" rx="8" fill="url(#cW)" stroke="#fed7aa" stroke-width="1"/>
    <rect x="960" y="502" width="210" height="4" rx="8" ry="2" fill="#ea580c"/>
  </g>
  <circle cx="978" cy="522" r="9" fill="#ea580c"/>
  <text x="978" y="526" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">P</text>
  <text x="993" y="525" font-size="11" font-weight="700" fill="#7c2d12">Prometheus</text>
  <text x="972" y="541" font-size="9" fill="#475569">12+ custom metrics</text>
  <rect x="972" y="556" width="132" height="15" rx="3" fill="#fff7ed" stroke="#fed7aa" stroke-width="0.7"/>
  <text x="978" y="567" font-size="7" fill="#7c2d12" font-family="monospace">configs/prometheus.yml</text>

  <!-- Grafana -->
  <g filter="url(#sh)">
    <rect x="960" y="594" width="210" height="78" rx="8" fill="url(#cW)" stroke="#fed7aa" stroke-width="1"/>
    <rect x="960" y="594" width="210" height="4" rx="8" ry="2" fill="#ea580c"/>
  </g>
  <circle cx="978" cy="614" r="9" fill="#ea580c"/>
  <text x="978" y="618" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">G</text>
  <text x="993" y="617" font-size="11" font-weight="700" fill="#7c2d12">Grafana</text>
  <text x="972" y="633" font-size="9" fill="#475569">Real-time dashboards</text>
  <rect x="972" y="648" width="96" height="15" rx="3" fill="#fff7ed" stroke="#fed7aa" stroke-width="0.7"/>
  <text x="978" y="659" font-size="7" fill="#7c2d12" font-family="monospace">configs/grafana/</text>

  <!-- Drift Detection -->
  <g filter="url(#sh)">
    <rect x="960" y="686" width="210" height="78" rx="8" fill="url(#cW)" stroke="#fed7aa" stroke-width="1"/>
    <rect x="960" y="686" width="210" height="4" rx="8" ry="2" fill="#ea580c"/>
  </g>
  <circle cx="978" cy="706" r="9" fill="#ea580c"/>
  <text x="978" y="710" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">S</text>
  <text x="993" y="709" font-size="11" font-weight="700" fill="#7c2d12">Drift Detection</text>
  <text x="972" y="725" font-size="9" fill="#475569">Shadow predictions</text>
  <rect x="972" y="740" width="148" height="15" rx="3" fill="#fff7ed" stroke="#fed7aa" stroke-width="0.7"/>
  <text x="978" y="751" font-size="7" fill="#7c2d12" font-family="monospace">src/inference/shadow.py</text>

  <!-- Monitoring internal arrows -->
  <line x1="1065" y1="580" x2="1065" y2="594" stroke="#ea580c" stroke-width="1.5" marker-end="url(#aO)"/>
  <line x1="1065" y1="672" x2="1065" y2="686" stroke="#ea580c" stroke-width="1.5" marker-end="url(#aO)"/>

  <!-- Orange arrow: FastAPI -> Prometheus -->
  <path d="M720 510 C820 520, 900 520, 960 530" stroke="#ea580c" stroke-width="1.8" fill="none" marker-end="url(#aO)"/>

  <!-- Orange feedback arrow: Drift -> Model (curved up) -->
  <path d="M960 725 C880 730, 780 680, 700 500 C680 450, 660 410, 650 400" stroke="#ea580c" stroke-width="1.3" fill="none" stroke-dasharray="5,3" marker-end="url(#aO)"/>

  <!-- ============================================================= -->
  <!-- TOP-LEFT: CI/CD (Red) - subtle                                 -->
  <!-- ============================================================= -->
  <text x="110" y="70" text-anchor="middle" font-size="11" font-weight="700" fill="#991b1b" letter-spacing="0.8">CI/CD</text>

  <!-- CI -->
  <g filter="url(#sh)">
    <rect x="28" y="80" width="165" height="38" rx="7" fill="url(#cW)" stroke="#fca5a5" stroke-width="1"/>
    <rect x="28" y="80" width="165" height="3" rx="7" ry="2" fill="#dc2626"/>
  </g>
  <circle cx="44" cy="99" r="8" fill="#dc2626"/>
  <text x="44" y="103" text-anchor="middle" font-size="7" font-weight="700" fill="#fff">CI</text>
  <text x="58" y="102" font-size="9.5" font-weight="700" fill="#991b1b">Lint, Test, Security</text>

  <!-- CD -->
  <g filter="url(#sh)">
    <rect x="28" y="126" width="165" height="38" rx="7" fill="url(#cW)" stroke="#fca5a5" stroke-width="1"/>
    <rect x="28" y="126" width="165" height="3" rx="7" ry="2" fill="#dc2626"/>
  </g>
  <circle cx="44" cy="145" r="8" fill="#dc2626"/>
  <text x="44" y="149" text-anchor="middle" font-size="7" font-weight="700" fill="#fff">CD</text>
  <text x="58" y="148" font-size="9.5" font-weight="700" fill="#991b1b">Build, Deploy, Smoke</text>

  <!-- CI/CD subtle dashed arrows -->
  <!-- CI/CD -> Training (subtle) -->
  <path d="M110 164 C110 178, 120 188, 130 198" stroke="#dc2626" stroke-width="1.1" fill="none" stroke-dasharray="4,3" marker-end="url(#aR)"/>
  <!-- CI/CD -> Deployment (subtle) -->
  <path d="M80 164 C70 400, 80 550, 120 600" stroke="#dc2626" stroke-width="1.1" fill="none" stroke-dasharray="4,3" marker-end="url(#aR)"/>

  <!-- ============================================================= -->
  <!-- Streamlit UI card (bonus, near inference)                      -->
  <!-- ============================================================= -->
  <g filter="url(#sh)">
    <rect x="555" y="562" width="170" height="58" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="555" y="562" width="170" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="573" cy="582" r="9" fill="#3b82f6"/>
  <text x="573" y="586" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">U</text>
  <text x="588" y="585" font-size="10.5" font-weight="700" fill="#1e40af">Streamlit UI</text>
  <text x="567" y="600" font-size="9" fill="#475569">Web interface, Grad-CAM viewer</text>

  <!-- Arrow: FastAPI -> Streamlit -->
  <path d="M600 538 C600 548, 620 555, 630 562" stroke="#3b82f6" stroke-width="1.5" fill="none" marker-end="url(#aB)"/>

  <!-- ============================================================= -->
  <!-- FOOTER: Tech Stack Badges                                      -->
  <!-- ============================================================= -->
  <line x1="40" y1="800" x2="1160" y2="800" stroke="#e2e8f0" stroke-width="1"/>
  <text x="600" y="818" text-anchor="middle" font-size="10" font-weight="600" fill="#64748b" letter-spacing="1">TECH STACK</text>

  <rect x="55" y="828" width="62" height="22" rx="6" fill="#3776ab"/>
  <text x="86" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Python</text>

  <rect x="123" y="828" width="65" height="22" rx="6" fill="#ee4c2c"/>
  <text x="155" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">PyTorch</text>

  <rect x="194" y="828" width="62" height="22" rx="6" fill="#059669"/>
  <text x="225" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">FastAPI</text>

  <rect x="262" y="828" width="60" height="22" rx="6" fill="#2496ed"/>
  <text x="292" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Docker</text>

  <rect x="328" y="828" width="76" height="22" rx="6" fill="#7c3aed"/>
  <text x="366" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Terraform</text>

  <rect x="410" y="828" width="48" height="22" rx="6" fill="#ea580c"/>
  <text x="434" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">GCP</text>

  <rect x="464" y="828" width="82" height="22" rx="6" fill="#e6522c"/>
  <text x="505" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Prometheus</text>

  <rect x="552" y="828" width="62" height="22" rx="6" fill="#f46800"/>
  <text x="583" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Grafana</text>

  <rect x="620" y="828" width="46" height="22" rx="6" fill="#13adc7"/>
  <text x="643" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">DVC</text>

  <rect x="672" y="828" width="58" height="22" rx="6" fill="#0194e2"/>
  <text x="701" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">MLflow</text>

  <rect x="736" y="828" width="102" height="22" rx="6" fill="#24292f"/>
  <text x="787" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">GitHub Actions</text>

  <rect x="844" y="828" width="82" height="22" rx="6" fill="#4c1d95"/>
  <text x="885" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">EfficientNet</text>

  <rect x="932" y="828" width="72" height="22" rx="6" fill="#ff4b4b"/>
  <text x="968" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Streamlit</text>

  <rect x="1010" y="828" width="60" height="22" rx="6" fill="#4285f4"/>
  <text x="1040" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Vertex AI</text>

  <rect x="1076" y="828" width="86" height="22" rx="6" fill="#945dd6"/>
  <text x="1119" y="843" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">EfficientNet</text>

  <!-- Flow Legend -->
  <g transform="translate(40, 862)">
    <line x1="0" y1="9" x2="25" y2="9" stroke="#059669" stroke-width="2" marker-end="url(#aG)"/>
    <text x="30" y="13" font-size="8" fill="#065f46">Data</text>
    <line x1="70" y1="9" x2="95" y2="9" stroke="#7c3aed" stroke-width="2" marker-end="url(#aP)"/>
    <text x="100" y="13" font-size="8" fill="#4c1d95">Model</text>
    <line x1="145" y1="9" x2="170" y2="9" stroke="#3b82f6" stroke-width="2" marker-end="url(#aB)"/>
    <text x="175" y="13" font-size="8" fill="#1e40af">Request</text>
    <line x1="225" y1="9" x2="250" y2="9" stroke="#ea580c" stroke-width="2" marker-end="url(#aO)"/>
    <text x="255" y="13" font-size="8" fill="#7c2d12">Metrics</text>
    <line x1="305" y1="9" x2="330" y2="9" stroke="#dc2626" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#aR)"/>
    <text x="335" y="13" font-size="8" fill="#991b1b">CI/CD</text>
    <line x1="375" y1="9" x2="400" y2="9" stroke="#ea580c" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#aO)"/>
    <text x="405" y="13" font-size="8" fill="#7c2d12">Feedback</text>
  </g>

  <!-- Credit -->
  <text x="1155" y="878" text-anchor="end" font-size="7" fill="#cbd5e1">AI Product Photo Detector - Architecture v2.0</text>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 680" width="960" height="680" font-family="Segoe UI, Arial, sans-serif">
  <defs>
    <!-- Background patterns & gradients -->
    <linearGradient id="bgGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#f8f9fa"/>
      <stop offset="100%" stop-color="#e9ecef"/>
    </linearGradient>
    <!-- Section fills -->
    <linearGradient id="dataGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#d4edda"/>
      <stop offset="100%" stop-color="#c3e6cb"/>
    </linearGradient>
    <linearGradient id="trainGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#ffeeba"/>
      <stop offset="100%" stop-color="#ffd89b"/>
    </linearGradient>
    <linearGradient id="inferGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#cce5ff"/>
      <stop offset="100%" stop-color="#b8daff"/>
    </linearGradient>
    <linearGradient id="monGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#e2d5f1"/>
      <stop offset="100%" stop-color="#d4c5e9"/>
    </linearGradient>
    <linearGradient id="infraGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#e2e3e5"/>
      <stop offset="100%" stop-color="#d6d8db"/>
    </linearGradient>
    <!-- Arrow marker -->
    <marker id="arrow" viewBox="0 0 10 6" refX="10" refY="3" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M0,0 L10,3 L0,6 Z" fill="#495057"/>
    </marker>
    <marker id="arrowBlue" viewBox="0 0 10 6" refX="10" refY="3" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M0,0 L10,3 L0,6 Z" fill="#0069d9"/>
    </marker>
    <marker id="arrowPurple" viewBox="0 0 10 6" refX="10" refY="3" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M0,0 L10,3 L0,6 Z" fill="#7b4fa0"/>
    </marker>
    <!-- Drop shadow -->
    <filter id="shadow" x="-2%" y="-2%" width="104%" height="104%">
      <feDropShadow dx="1" dy="1" stdDeviation="2" flood-opacity="0.12"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="960" height="680" rx="8" fill="url(#bgGrad)"/>

  <!-- Title -->
  <text x="480" y="28" text-anchor="middle" font-size="16" font-weight="700" fill="#212529">AI Product Photo Detector — System Architecture</text>
  <text x="480" y="44" text-anchor="middle" font-size="9" fill="#6c757d">EfficientNet-B0 binary classifier  |  FastAPI + Streamlit  |  GCP Cloud Run  |  DVC + MLflow</text>

  <!-- ============================================================ -->
  <!-- SECTION 1: DATA LAYER (green) -->
  <!-- ============================================================ -->
  <rect x="14" y="56" width="290" height="260" rx="10" fill="url(#dataGrad)" stroke="#28a745" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="159" y="74" text-anchor="middle" font-size="11" font-weight="700" fill="#155724">DATA LAYER</text>

  <!-- Kaggle API -->
  <rect x="28" y="84" width="120" height="36" rx="6" fill="#fff" stroke="#28a745" stroke-width="1"/>
  <text x="88" y="99" text-anchor="middle" font-size="8.5" font-weight="600" fill="#155724">Kaggle API</text>
  <text x="88" y="111" text-anchor="middle" font-size="7" fill="#495057">CIFAKE Dataset</text>

  <!-- Raw Dataset -->
  <rect x="170" y="84" width="120" height="36" rx="6" fill="#fff" stroke="#28a745" stroke-width="1"/>
  <text x="230" y="99" text-anchor="middle" font-size="8.5" font-weight="600" fill="#155724">Raw Dataset</text>
  <text x="230" y="111" text-anchor="middle" font-size="7" fill="#495057">real/ + ai/ images</text>

  <!-- Arrow: Kaggle → Raw -->
  <line x1="148" y1="102" x2="168" y2="102" stroke="#495057" stroke-width="1.2" marker-end="url(#arrow)"/>

  <!-- DVC Pipeline box -->
  <rect x="28" y="130" width="262" height="80" rx="6" fill="#fff" stroke="#28a745" stroke-width="1"/>
  <text x="159" y="145" text-anchor="middle" font-size="8.5" font-weight="700" fill="#155724">DVC Pipeline (dvc.yaml)</text>

  <!-- Pipeline stages -->
  <rect x="38" y="153" width="70" height="22" rx="4" fill="#e8f5e9" stroke="#66bb6a" stroke-width="0.8"/>
  <text x="73" y="167" text-anchor="middle" font-size="7" font-weight="600" fill="#2e7d32">download</text>

  <rect x="118" y="153" width="70" height="22" rx="4" fill="#e8f5e9" stroke="#66bb6a" stroke-width="0.8"/>
  <text x="153" y="167" text-anchor="middle" font-size="7" font-weight="600" fill="#2e7d32">validate</text>

  <rect x="198" y="153" width="82" height="22" rx="4" fill="#e8f5e9" stroke="#66bb6a" stroke-width="0.8"/>
  <text x="239" y="167" text-anchor="middle" font-size="7" font-weight="600" fill="#2e7d32">train + evaluate</text>

  <!-- Stage arrows -->
  <line x1="108" y1="164" x2="116" y2="164" stroke="#495057" stroke-width="0.8" marker-end="url(#arrow)"/>
  <line x1="188" y1="164" x2="196" y2="164" stroke="#495057" stroke-width="0.8" marker-end="url(#arrow)"/>

  <text x="159" y="198" text-anchor="middle" font-size="7" fill="#495057">Tracked with DVC remote storage</text>

  <!-- Data Validation -->
  <rect x="28" y="220" width="262" height="42" rx="6" fill="#fff" stroke="#28a745" stroke-width="1"/>
  <text x="159" y="236" text-anchor="middle" font-size="8.5" font-weight="600" fill="#155724">Data Validation</text>
  <text x="159" y="248" text-anchor="middle" font-size="7" fill="#495057">Class balance | Corrupt images | Resolution stats</text>
  <text x="159" y="257" text-anchor="middle" font-size="6.5" fill="#6c757d">src/data/validate.py  →  reports/data_validation.json</text>

  <!-- Arrow: Raw → DVC -->
  <line x1="230" y1="120" x2="230" y2="128" stroke="#495057" stroke-width="1.0" marker-end="url(#arrow)"/>

  <!-- ============================================================ -->
  <!-- SECTION 2: TRAINING LAYER (orange) -->
  <!-- ============================================================ -->
  <rect x="14" y="326" width="290" height="200" rx="10" fill="url(#trainGrad)" stroke="#e67e22" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="159" y="344" text-anchor="middle" font-size="11" font-weight="700" fill="#7c4a03">TRAINING LAYER</text>

  <!-- Model box -->
  <rect x="28" y="354" width="262" height="44" rx="6" fill="#fff" stroke="#e67e22" stroke-width="1"/>
  <text x="159" y="370" text-anchor="middle" font-size="8.5" font-weight="600" fill="#7c4a03">EfficientNet-B0</text>
  <text x="159" y="381" text-anchor="middle" font-size="7" fill="#495057">timm | ImageNet pretrained | Transfer learning</text>
  <text x="159" y="391" text-anchor="middle" font-size="6.5" fill="#6c757d">Binary classifier (sigmoid) | dropout=0.3</text>

  <!-- Training loop -->
  <rect x="28" y="406" width="126" height="44" rx="6" fill="#fff" stroke="#e67e22" stroke-width="1"/>
  <text x="91" y="421" text-anchor="middle" font-size="8.5" font-weight="600" fill="#7c4a03">PyTorch Training</text>
  <text x="91" y="432" text-anchor="middle" font-size="7" fill="#495057">Early stopping</text>
  <text x="91" y="442" text-anchor="middle" font-size="6.5" fill="#6c757d">Cosine LR + Warmup</text>

  <!-- MLflow -->
  <rect x="164" y="406" width="126" height="44" rx="6" fill="#fff" stroke="#e67e22" stroke-width="1"/>
  <text x="227" y="421" text-anchor="middle" font-size="8.5" font-weight="600" fill="#7c4a03">MLflow Tracking</text>
  <text x="227" y="432" text-anchor="middle" font-size="7" fill="#495057">Experiments, params</text>
  <text x="227" y="442" text-anchor="middle" font-size="6.5" fill="#6c757d">Metrics, model artifacts</text>

  <!-- Checkpoint -->
  <rect x="28" y="460" width="262" height="30" rx="6" fill="#fff3e0" stroke="#e67e22" stroke-width="1"/>
  <text x="159" y="479" text-anchor="middle" font-size="8" font-weight="600" fill="#7c4a03">best_model.pt  (DVC tracked)</text>

  <!-- Data → Training arrow -->
  <line x1="159" y1="316" x2="159" y2="324" stroke="#495057" stroke-width="1.2" marker-end="url(#arrow)"/>

  <!-- Augmentation note -->
  <text x="159" y="518" text-anchor="middle" font-size="6.5" fill="#7c4a03">Augmentation: flip, rotate, color jitter, crop</text>

  <!-- ============================================================ -->
  <!-- SECTION 3: INFERENCE LAYER (blue) -->
  <!-- ============================================================ -->
  <rect x="320" y="56" width="326" height="310" rx="10" fill="url(#inferGrad)" stroke="#0069d9" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="483" y="74" text-anchor="middle" font-size="11" font-weight="700" fill="#003d80">INFERENCE LAYER  (FastAPI)</text>

  <!-- API Endpoints group -->
  <rect x="334" y="84" width="186" height="140" rx="6" fill="#fff" stroke="#0069d9" stroke-width="1"/>
  <text x="427" y="99" text-anchor="middle" font-size="8.5" font-weight="700" fill="#003d80">API Endpoints</text>
  <text x="345" y="114" font-size="7" fill="#495057" font-weight="600">POST /predict</text>
  <text x="345" y="126" font-size="7" fill="#495057" font-weight="600">POST /predict/explain</text>
  <text x="345" y="138" font-size="7" fill="#495057" font-weight="600">POST /predict/batch</text>
  <text x="345" y="150" font-size="7" fill="#495057" font-weight="600">POST /predict/compare</text>
  <line x1="342" y1="157" x2="512" y2="157" stroke="#dee2e6" stroke-width="0.5"/>
  <text x="345" y="169" font-size="7" fill="#6c757d">GET  /health  /metrics  /docs</text>
  <text x="345" y="181" font-size="7" fill="#6c757d">GET  /liveness  /ready</text>
  <text x="345" y="193" font-size="7" fill="#6c757d">DELETE /admin/drift/reset</text>
  <text x="345" y="207" font-size="6.5" fill="#868e96">Rate limiting (slowapi) | API Key auth | CORS</text>

  <!-- Predictor -->
  <rect x="530" y="84" width="102" height="50" rx="6" fill="#fff" stroke="#0069d9" stroke-width="1"/>
  <text x="581" y="103" text-anchor="middle" font-size="8.5" font-weight="600" fill="#003d80">Predictor</text>
  <text x="581" y="115" text-anchor="middle" font-size="7" fill="#495057">EfficientNet-B0</text>
  <text x="581" y="126" text-anchor="middle" font-size="6.5" fill="#6c757d">Real / AI output</text>

  <!-- GradCAM Explainer -->
  <rect x="530" y="142" width="102" height="42" rx="6" fill="#fff" stroke="#0069d9" stroke-width="1"/>
  <text x="581" y="158" text-anchor="middle" font-size="8.5" font-weight="600" fill="#003d80">GradCAM</text>
  <text x="581" y="170" text-anchor="middle" font-size="7" fill="#495057">Heatmap overlay</text>
  <text x="581" y="179" text-anchor="middle" font-size="6.5" fill="#6c757d">explainer.py</text>

  <!-- Shadow A/B -->
  <rect x="530" y="192" width="102" height="38" rx="6" fill="#fff" stroke="#0069d9" stroke-width="1"/>
  <text x="581" y="207" text-anchor="middle" font-size="8.5" font-weight="600" fill="#003d80">Shadow A/B</text>
  <text x="581" y="218" text-anchor="middle" font-size="7" fill="#495057">Model comparison</text>
  <text x="581" y="226" text-anchor="middle" font-size="6.5" fill="#6c757d">shadow.py</text>

  <!-- Arrows: endpoints → components -->
  <line x1="520" y1="106" x2="528" y2="106" stroke="#0069d9" stroke-width="0.9" marker-end="url(#arrowBlue)"/>
  <line x1="520" y1="134" x2="530" y2="156" stroke="#0069d9" stroke-width="0.9" marker-end="url(#arrowBlue)"/>
  <line x1="520" y1="152" x2="530" y2="207" stroke="#0069d9" stroke-width="0.9" marker-end="url(#arrowBlue)"/>

  <!-- Input Validation -->
  <rect x="334" y="232" width="142" height="34" rx="6" fill="#fff" stroke="#0069d9" stroke-width="1"/>
  <text x="405" y="248" text-anchor="middle" font-size="8" font-weight="600" fill="#003d80">Input Validation</text>
  <text x="405" y="259" text-anchor="middle" font-size="6.5" fill="#495057">Size, format, dimensions</text>

  <!-- Config -->
  <rect x="486" y="232" width="146" height="34" rx="6" fill="#fff" stroke="#0069d9" stroke-width="1"/>
  <text x="559" y="248" text-anchor="middle" font-size="8" font-weight="600" fill="#003d80">Config</text>
  <text x="559" y="259" text-anchor="middle" font-size="6.5" fill="#495057">inference_config.yaml</text>

  <!-- Middleware row -->
  <rect x="334" y="274" width="298" height="30" rx="6" fill="#e3f1ff" stroke="#0069d9" stroke-width="0.8"/>
  <text x="483" y="291" text-anchor="middle" font-size="7.5" font-weight="600" fill="#003d80">Middleware: CORS | Request ID | Metrics | Structured Logging (structlog)</text>

  <!-- Schemas -->
  <rect x="334" y="312" width="298" height="24" rx="6" fill="#fff" stroke="#0069d9" stroke-width="0.8"/>
  <text x="483" y="328" text-anchor="middle" font-size="7" fill="#003d80">Pydantic Schemas: PredictResponse | BatchResponse | ExplainResponse | CompareResponse | HealthResponse</text>

  <!-- Arrow: model checkpoint → Predictor -->
  <path d="M290,475 L310,475 L310,50 L581,50 L581,82" fill="none" stroke="#495057" stroke-width="1.2" stroke-dasharray="4,2" marker-end="url(#arrow)"/>

  <!-- ============================================================ -->
  <!-- SECTION 4: FRONTEND (blue-ish) -->
  <!-- ============================================================ -->
  <rect x="320" y="376" width="180" height="150" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="410" y="394" text-anchor="middle" font-size="11" font-weight="700" fill="#1e3a5f">FRONTEND</text>

  <!-- Streamlit -->
  <rect x="334" y="404" width="152" height="50" rx="6" fill="#fff" stroke="#3b82f6" stroke-width="1"/>
  <text x="410" y="420" text-anchor="middle" font-size="9" font-weight="600" fill="#1e3a5f">Streamlit UI</text>
  <text x="410" y="432" text-anchor="middle" font-size="7" fill="#495057">Image upload + prediction</text>
  <text x="410" y="443" text-anchor="middle" font-size="6.5" fill="#6c757d">src/ui/app.py</text>

  <!-- Features -->
  <rect x="334" y="462" width="152" height="52" rx="6" fill="#fff" stroke="#3b82f6" stroke-width="1"/>
  <text x="410" y="477" text-anchor="middle" font-size="7.5" font-weight="600" fill="#1e3a5f">Features</text>
  <text x="410" y="489" text-anchor="middle" font-size="6.5" fill="#495057">Auto-compress large images</text>
  <text x="410" y="499" text-anchor="middle" font-size="6.5" fill="#495057">GradCAM visualization</text>
  <text x="410" y="509" text-anchor="middle" font-size="6.5" fill="#495057">Confidence display</text>

  <!-- Arrow: Streamlit → FastAPI -->
  <line x1="410" y1="376" x2="410" y2="368" stroke="#0069d9" stroke-width="1.2" marker-end="url(#arrowBlue)"/>
  <text x="418" y="372" font-size="6" fill="#0069d9">HTTP</text>

  <!-- ============================================================ -->
  <!-- SECTION 5: MONITORING (purple) -->
  <!-- ============================================================ -->
  <rect x="660" y="56" width="286" height="260" rx="10" fill="url(#monGrad)" stroke="#7b4fa0" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="803" y="74" text-anchor="middle" font-size="11" font-weight="700" fill="#4a235a">MONITORING</text>

  <!-- Prometheus -->
  <rect x="674" y="84" width="130" height="52" rx="6" fill="#fff" stroke="#7b4fa0" stroke-width="1"/>
  <text x="739" y="100" text-anchor="middle" font-size="9" font-weight="600" fill="#4a235a">Prometheus</text>
  <text x="739" y="112" text-anchor="middle" font-size="6.5" fill="#495057">predictions_total</text>
  <text x="739" y="122" text-anchor="middle" font-size="6.5" fill="#495057">latency, batch_size</text>
  <text x="739" y="131" text-anchor="middle" font-size="6.5" fill="#6c757d">prometheus.yml</text>

  <!-- Grafana -->
  <rect x="812" y="84" width="120" height="52" rx="6" fill="#fff" stroke="#7b4fa0" stroke-width="1"/>
  <text x="872" y="100" text-anchor="middle" font-size="9" font-weight="600" fill="#4a235a">Grafana</text>
  <text x="872" y="112" text-anchor="middle" font-size="6.5" fill="#495057">16-panel dashboard</text>
  <text x="872" y="122" text-anchor="middle" font-size="6.5" fill="#495057">Alerts &amp; viz</text>
  <text x="872" y="131" text-anchor="middle" font-size="6.5" fill="#6c757d">configs/grafana/</text>

  <!-- Arrow: Prometheus → Grafana -->
  <line x1="804" y1="110" x2="810" y2="110" stroke="#7b4fa0" stroke-width="0.9" marker-end="url(#arrowPurple)"/>

  <!-- Drift Detection -->
  <rect x="674" y="146" width="258" height="46" rx="6" fill="#fff" stroke="#7b4fa0" stroke-width="1"/>
  <text x="803" y="162" text-anchor="middle" font-size="8.5" font-weight="600" fill="#4a235a">Drift Detection</text>
  <text x="803" y="174" text-anchor="middle" font-size="7" fill="#495057">Probability distribution shift | Low confidence ratio</text>
  <text x="803" y="184" text-anchor="middle" font-size="6.5" fill="#6c757d">src/monitoring/drift.py  →  drift_score gauge</text>

  <!-- Structured Logging -->
  <rect x="674" y="200" width="258" height="38" rx="6" fill="#fff" stroke="#7b4fa0" stroke-width="1"/>
  <text x="803" y="215" text-anchor="middle" font-size="8.5" font-weight="600" fill="#4a235a">Structured Logging</text>
  <text x="803" y="227" text-anchor="middle" font-size="7" fill="#495057">JSON format | structlog | Request IDs</text>
  <text x="803" y="234" text-anchor="middle" font-size="6.5" fill="#6c757d">src/utils/logger.py</text>

  <!-- Metrics list -->
  <rect x="674" y="246" width="258" height="56" rx="6" fill="#f3eef8" stroke="#7b4fa0" stroke-width="0.8"/>
  <text x="803" y="260" text-anchor="middle" font-size="7.5" font-weight="600" fill="#4a235a">Key Metrics</text>
  <text x="684" y="273" font-size="6.5" fill="#495057">predictions_total | prediction_latency_seconds</text>
  <text x="684" y="283" font-size="6.5" fill="#495057">batch_predictions_total | model_loaded</text>
  <text x="684" y="293" font-size="6.5" fill="#495057">http_request_duration | active_requests | errors_total</text>

  <!-- Arrow: FastAPI → Prometheus -->
  <line x1="646" y1="110" x2="672" y2="110" stroke="#7b4fa0" stroke-width="1.2" stroke-dasharray="3,2" marker-end="url(#arrowPurple)"/>
  <text x="654" y="104" font-size="6" fill="#7b4fa0">/metrics</text>

  <!-- ============================================================ -->
  <!-- SECTION 6: INFRASTRUCTURE (gray) -->
  <!-- ============================================================ -->
  <rect x="516" y="376" width="430" height="280" rx="10" fill="url(#infraGrad)" stroke="#6c757d" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="731" y="394" text-anchor="middle" font-size="11" font-weight="700" fill="#343a40">INFRASTRUCTURE</text>

  <!-- Docker -->
  <rect x="530" y="406" width="150" height="72" rx="6" fill="#fff" stroke="#6c757d" stroke-width="1"/>
  <text x="605" y="422" text-anchor="middle" font-size="9" font-weight="600" fill="#343a40">Docker</text>
  <rect x="540" y="430" width="130" height="16" rx="3" fill="#f1f3f5" stroke="#adb5bd" stroke-width="0.5"/>
  <text x="605" y="441" text-anchor="middle" font-size="7" fill="#495057">serve.Dockerfile  (API)</text>
  <rect x="540" y="450" width="130" height="16" rx="3" fill="#f1f3f5" stroke="#adb5bd" stroke-width="0.5"/>
  <text x="605" y="461" text-anchor="middle" font-size="7" fill="#495057">ui.Dockerfile  (Streamlit)</text>
  <text x="605" y="475" text-anchor="middle" font-size="6.5" fill="#6c757d">+ train.Dockerfile</text>

  <!-- GCP -->
  <rect x="694" y="406" width="238" height="72" rx="6" fill="#fff" stroke="#6c757d" stroke-width="1"/>
  <text x="813" y="422" text-anchor="middle" font-size="9" font-weight="600" fill="#343a40">Google Cloud Platform</text>
  <rect x="704" y="430" width="110" height="16" rx="3" fill="#e8f0fe" stroke="#4285f4" stroke-width="0.5"/>
  <text x="759" y="441" text-anchor="middle" font-size="7" fill="#174ea6">Artifact Registry</text>
  <rect x="704" y="450" width="110" height="16" rx="3" fill="#e8f0fe" stroke="#4285f4" stroke-width="0.5"/>
  <text x="759" y="461" text-anchor="middle" font-size="7" fill="#174ea6">Cloud Run (API)</text>
  <rect x="822" y="450" width="100" height="16" rx="3" fill="#e8f0fe" stroke="#4285f4" stroke-width="0.5"/>
  <text x="872" y="461" text-anchor="middle" font-size="7" fill="#174ea6">Cloud Run (UI)</text>

  <!-- Arrow: Docker → GCP -->
  <line x1="680" y1="442" x2="702" y2="442" stroke="#495057" stroke-width="1.0" marker-end="url(#arrow)"/>
  <text x="688" y="437" font-size="5.5" fill="#6c757d">push</text>

  <!-- CI/CD -->
  <rect x="530" y="490" width="402" height="68" rx="6" fill="#fff" stroke="#6c757d" stroke-width="1"/>
  <text x="731" y="506" text-anchor="middle" font-size="9" font-weight="600" fill="#343a40">GitHub Actions CI/CD</text>
  <rect x="544" y="514" width="116" height="18" rx="4" fill="#f6f8fa" stroke="#d1d5da" stroke-width="0.6"/>
  <text x="602" y="527" text-anchor="middle" font-size="7" font-weight="600" fill="#24292e">ci.yml</text>
  <text x="602" y="537" text-anchor="middle" font-size="5.5" fill="#6c757d">lint, test, typecheck</text>

  <rect x="670" y="514" width="116" height="18" rx="4" fill="#f6f8fa" stroke="#d1d5da" stroke-width="0.6"/>
  <text x="728" y="527" text-anchor="middle" font-size="7" font-weight="600" fill="#24292e">cd.yml</text>
  <text x="728" y="537" text-anchor="middle" font-size="5.5" fill="#6c757d">build, push, deploy</text>

  <rect x="796" y="514" width="126" height="18" rx="4" fill="#f6f8fa" stroke="#d1d5da" stroke-width="0.6"/>
  <text x="859" y="527" text-anchor="middle" font-size="7" font-weight="600" fill="#24292e">model-training.yml</text>
  <text x="859" y="537" text-anchor="middle" font-size="5.5" fill="#6c757d">DVC repro, upload</text>

  <!-- Tools row -->
  <rect x="530" y="568" width="402" height="38" rx="6" fill="#fff" stroke="#6c757d" stroke-width="1"/>
  <text x="731" y="583" text-anchor="middle" font-size="8" font-weight="600" fill="#343a40">Dev Tooling</text>
  <text x="731" y="596" text-anchor="middle" font-size="7" fill="#495057">ruff (lint+format) | mypy (types) | pytest + coverage | pre-commit hooks | Makefile</text>

  <!-- Config files -->
  <rect x="530" y="614" width="402" height="30" rx="6" fill="#f8f9fa" stroke="#6c757d" stroke-width="0.8"/>
  <text x="731" y="633" text-anchor="middle" font-size="7" fill="#6c757d">pyproject.toml | train_config.yaml | inference_config.yaml | prometheus.yml | docker-compose.yml</text>

  <!-- ============================================================ -->
  <!-- LEGEND -->
  <!-- ============================================================ -->
  <rect x="14" y="536" width="290" height="120" rx="8" fill="#fff" stroke="#dee2e6" stroke-width="1" filter="url(#shadow)"/>
  <text x="159" y="553" text-anchor="middle" font-size="9" font-weight="700" fill="#343a40">Legend</text>

  <rect x="28" y="562" width="14" height="10" rx="2" fill="#d4edda" stroke="#28a745" stroke-width="0.8"/>
  <text x="48" y="571" font-size="7.5" fill="#343a40">Data Layer (DVC, Kaggle, Validation)</text>

  <rect x="28" y="578" width="14" height="10" rx="2" fill="#ffeeba" stroke="#e67e22" stroke-width="0.8"/>
  <text x="48" y="587" font-size="7.5" fill="#343a40">Training (PyTorch, EfficientNet, MLflow)</text>

  <rect x="28" y="594" width="14" height="10" rx="2" fill="#cce5ff" stroke="#0069d9" stroke-width="0.8"/>
  <text x="48" y="603" font-size="7.5" fill="#343a40">Inference (FastAPI, Streamlit)</text>

  <rect x="28" y="610" width="14" height="10" rx="2" fill="#e2d5f1" stroke="#7b4fa0" stroke-width="0.8"/>
  <text x="48" y="619" font-size="7.5" fill="#343a40">Monitoring (Prometheus, Grafana, Drift)</text>

  <rect x="28" y="626" width="14" height="10" rx="2" fill="#e2e3e5" stroke="#6c757d" stroke-width="0.8"/>
  <text x="48" y="635" font-size="7.5" fill="#343a40">Infrastructure (Docker, GCP, CI/CD)</text>

  <line x1="170" y1="569" x2="196" y2="569" stroke="#495057" stroke-width="1.2" marker-end="url(#arrow)"/>
  <text x="202" y="572" font-size="7.5" fill="#343a40">Data flow</text>

  <line x1="170" y1="585" x2="196" y2="585" stroke="#495057" stroke-width="1.2" stroke-dasharray="4,2" marker-end="url(#arrow)"/>
  <text x="202" y="588" font-size="7.5" fill="#343a40">Model artifact flow</text>

</svg>
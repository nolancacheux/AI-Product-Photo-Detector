<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" font-family="system-ui, -apple-system, 'Segoe UI', sans-serif">
  <defs>
    <filter id="sh" x="-2%" y="-2%" width="104%" height="108%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#94a3b8" flood-opacity="0.15"/>
    </filter>
    <filter id="sh-lg" x="-3%" y="-3%" width="106%" height="112%">
      <feDropShadow dx="0" dy="3" stdDeviation="5" flood-color="#94a3b8" flood-opacity="0.18"/>
    </filter>
    <linearGradient id="gGreen" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#ecfdf5"/><stop offset="100%" stop-color="#d1fae5"/>
    </linearGradient>
    <linearGradient id="gPurple" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#faf5ff"/><stop offset="100%" stop-color="#ede9fe"/>
    </linearGradient>
    <linearGradient id="gBlue" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#eff6ff"/><stop offset="100%" stop-color="#dbeafe"/>
    </linearGradient>
    <linearGradient id="gOrange" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#fff7ed"/><stop offset="100%" stop-color="#ffedd5"/>
    </linearGradient>
    <linearGradient id="gRed" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#fef2f2"/><stop offset="100%" stop-color="#fecdd3"/>
    </linearGradient>
    <linearGradient id="cW" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#ffffff"/><stop offset="100%" stop-color="#f8fafc"/>
    </linearGradient>
    <marker id="aG" viewBox="0 0 10 8" refX="9" refY="4" markerWidth="7" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,0 L10,4 L0,8 Z" fill="#059669"/>
    </marker>
    <marker id="aP" viewBox="0 0 10 8" refX="9" refY="4" markerWidth="7" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,0 L10,4 L0,8 Z" fill="#7c3aed"/>
    </marker>
    <marker id="aB" viewBox="0 0 10 8" refX="9" refY="4" markerWidth="7" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,0 L10,4 L0,8 Z" fill="#3b82f6"/>
    </marker>
    <marker id="aO" viewBox="0 0 10 8" refX="9" refY="4" markerWidth="7" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,0 L10,4 L0,8 Z" fill="#ea580c"/>
    </marker>
    <marker id="aR" viewBox="0 0 10 8" refX="9" refY="4" markerWidth="7" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,0 L10,4 L0,8 Z" fill="#dc2626"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="900" fill="#f8fafc"/>
  <!-- Accent bar -->
  <rect x="0" y="0" width="240" height="4" fill="#059669"/>
  <rect x="240" y="0" width="240" height="4" fill="#7c3aed"/>
  <rect x="480" y="0" width="240" height="4" fill="#3b82f6"/>
  <rect x="720" y="0" width="240" height="4" fill="#ea580c"/>
  <rect x="960" y="0" width="240" height="4" fill="#dc2626"/>

  <!-- Title -->
  <text x="600" y="32" text-anchor="middle" font-size="18" font-weight="700" fill="#0f172a">AI Product Photo Detector — System Architecture</text>
  <text x="600" y="49" text-anchor="middle" font-size="11" fill="#64748b">EfficientNet-B0 · FastAPI · Cloud Run · Terraform · MLOps</text>

  <!-- ============================================================= -->
  <!-- ROW 1: DATA PIPELINE (Green) y=62..205                        -->
  <!-- ============================================================= -->
  <g filter="url(#sh-lg)">
    <rect x="24" y="62" width="1152" height="143" rx="12" fill="url(#gGreen)" stroke="#a7f3d0" stroke-width="1.2"/>
    <rect x="24" y="62" width="1152" height="5" rx="12" ry="2" fill="#059669"/>
  </g>
  <text x="600" y="82" text-anchor="middle" font-size="12" font-weight="700" fill="#065f46" letter-spacing="1">DATA PIPELINE</text>

  <!-- Card: CIFAKE Dataset -->
  <g filter="url(#sh)">
    <rect x="48" y="92" width="340" height="100" rx="8" fill="url(#cW)" stroke="#a7f3d0" stroke-width="1"/>
    <rect x="48" y="92" width="340" height="4" rx="8" ry="2" fill="#059669"/>
  </g>
  <circle cx="70" cy="112" r="10" fill="#059669"/>
  <text x="70" y="116" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">D</text>
  <text x="86" y="115" font-size="12" font-weight="700" fill="#065f46">CIFAKE Dataset</text>
  <text x="60" y="132" font-size="10" fill="#475569">140,000 images (real + AI-generated)</text>
  <text x="60" y="146" font-size="10" fill="#475569">Binary classification benchmark</text>
  <rect x="60" y="160" width="178" height="18" rx="4" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="0.8"/>
  <text x="66" y="173" font-size="8" fill="#065f46" font-family="monospace">scripts/download_cifake.py</text>

  <!-- Card: Data Processing -->
  <g filter="url(#sh)">
    <rect x="430" y="92" width="340" height="100" rx="8" fill="url(#cW)" stroke="#a7f3d0" stroke-width="1"/>
    <rect x="430" y="92" width="340" height="4" rx="8" ry="2" fill="#059669"/>
  </g>
  <circle cx="452" cy="112" r="10" fill="#059669"/>
  <text x="452" y="116" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">P</text>
  <text x="468" y="115" font-size="12" font-weight="700" fill="#065f46">Data Processing</text>
  <text x="442" y="132" font-size="10" fill="#475569">Augmentation, validation, transforms</text>
  <text x="442" y="146" font-size="10" fill="#475569">Train / val / test splits</text>
  <rect x="442" y="160" width="158" height="18" rx="4" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="0.8"/>
  <text x="448" y="173" font-size="8" fill="#065f46" font-family="monospace">src/training/dataset.py</text>

  <!-- Card: DVC Pipeline -->
  <g filter="url(#sh)">
    <rect x="812" y="92" width="340" height="100" rx="8" fill="url(#cW)" stroke="#a7f3d0" stroke-width="1"/>
    <rect x="812" y="92" width="340" height="4" rx="8" ry="2" fill="#059669"/>
  </g>
  <circle cx="834" cy="112" r="10" fill="#059669"/>
  <text x="834" y="116" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">V</text>
  <text x="850" y="115" font-size="12" font-weight="700" fill="#065f46">DVC Pipeline</text>
  <text x="824" y="132" font-size="10" fill="#475569">Versioned data and model artifacts</text>
  <text x="824" y="146" font-size="10" fill="#475569">Reproducible ML pipelines</text>
  <rect x="824" y="160" width="78" height="18" rx="4" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="0.8"/>
  <text x="830" y="173" font-size="8" fill="#065f46" font-family="monospace">dvc.yaml</text>

  <!-- Arrows: Dataset → Processing → DVC -->
  <line x1="388" y1="142" x2="430" y2="142" stroke="#059669" stroke-width="2" marker-end="url(#aG)"/>
  <line x1="770" y1="142" x2="812" y2="142" stroke="#059669" stroke-width="2" marker-end="url(#aG)"/>

  <!-- ============================================================= -->
  <!-- VERTICAL ARROW: Data → Training                                -->
  <!-- ============================================================= -->
  <path d="M600 205 L600 225" stroke="#059669" stroke-width="2" marker-end="url(#aG)" fill="none"/>

  <!-- ============================================================= -->
  <!-- ROW 2: TRAINING PIPELINE (Purple) y=228..400                   -->
  <!-- ============================================================= -->
  <g filter="url(#sh-lg)">
    <rect x="24" y="228" width="1152" height="172" rx="12" fill="url(#gPurple)" stroke="#c4b5fd" stroke-width="1.2"/>
    <rect x="24" y="228" width="1152" height="5" rx="12" ry="2" fill="#7c3aed"/>
  </g>
  <text x="600" y="248" text-anchor="middle" font-size="12" font-weight="700" fill="#4c1d95" letter-spacing="1">TRAINING PIPELINE</text>

  <!-- Card: Local Training -->
  <g filter="url(#sh)">
    <rect x="48" y="258" width="220" height="90" rx="8" fill="url(#cW)" stroke="#c4b5fd" stroke-width="1"/>
    <rect x="48" y="258" width="220" height="4" rx="8" ry="2" fill="#7c3aed"/>
  </g>
  <circle cx="68" cy="278" r="10" fill="#7c3aed"/>
  <text x="68" y="282" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">L</text>
  <text x="84" y="281" font-size="11" font-weight="700" fill="#4c1d95">Local Training</text>
  <text x="60" y="297" font-size="9.5" fill="#475569">Docker, CPU/GPU dev</text>
  <rect x="60" y="318" width="152" height="17" rx="4" fill="#faf5ff" stroke="#c4b5fd" stroke-width="0.8"/>
  <text x="66" y="330" font-size="7.5" fill="#4c1d95" font-family="monospace">docker/Dockerfile.training</text>

  <!-- Card: Google Colab -->
  <g filter="url(#sh)">
    <rect x="286" y="258" width="220" height="90" rx="8" fill="url(#cW)" stroke="#c4b5fd" stroke-width="1"/>
    <rect x="286" y="258" width="220" height="4" rx="8" ry="2" fill="#7c3aed"/>
  </g>
  <circle cx="306" cy="278" r="10" fill="#7c3aed"/>
  <text x="306" y="282" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">C</text>
  <text x="322" y="281" font-size="11" font-weight="700" fill="#4c1d95">Google Colab</text>
  <text x="298" y="297" font-size="9.5" fill="#475569">Free T4 GPU, notebook</text>
  <rect x="298" y="318" width="166" height="17" rx="4" fill="#faf5ff" stroke="#c4b5fd" stroke-width="0.8"/>
  <text x="304" y="330" font-size="7.5" fill="#4c1d95" font-family="monospace">notebooks/train_colab.ipynb</text>

  <!-- Card: Vertex AI -->
  <g filter="url(#sh)">
    <rect x="524" y="258" width="220" height="90" rx="8" fill="url(#cW)" stroke="#c4b5fd" stroke-width="1"/>
    <rect x="524" y="258" width="220" height="4" rx="8" ry="2" fill="#7c3aed"/>
  </g>
  <circle cx="544" cy="278" r="10" fill="#7c3aed"/>
  <text x="544" y="282" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">V</text>
  <text x="560" y="281" font-size="11" font-weight="700" fill="#4c1d95">Vertex AI</text>
  <text x="536" y="297" font-size="9.5" fill="#475569">Production, managed GPU</text>
  <rect x="536" y="318" width="170" height="17" rx="4" fill="#faf5ff" stroke="#c4b5fd" stroke-width="0.8"/>
  <text x="542" y="330" font-size="7.5" fill="#4c1d95" font-family="monospace">src/training/vertex_submit.py</text>

  <!-- Trained Model Card (purple solid) -->
  <g filter="url(#sh)">
    <rect x="770" y="258" width="150" height="90" rx="10" fill="#7c3aed" stroke="#6d28d9" stroke-width="1.5"/>
  </g>
  <text x="845" y="280" text-anchor="middle" font-size="9" font-weight="700" fill="#e9d5ff">TRAINED MODEL</text>
  <text x="845" y="298" text-anchor="middle" font-size="13" font-weight="800" fill="#ffffff">EfficientNet-B0</text>
  <text x="845" y="314" text-anchor="middle" font-size="9" fill="#e9d5ff">Binary classifier</text>
  <rect x="808" y="324" width="74" height="14" rx="4" fill="#6d28d9"/>
  <text x="845" y="334" text-anchor="middle" font-size="7.5" fill="#e9d5ff" font-weight="600">95%+ Accuracy</text>

  <!-- MLflow + GCS -->
  <g filter="url(#sh)">
    <rect x="940" y="258" width="210" height="40" rx="8" fill="url(#cW)" stroke="#c4b5fd" stroke-width="1"/>
    <rect x="940" y="258" width="210" height="3" rx="8" ry="2" fill="#7c3aed"/>
  </g>
  <circle cx="958" cy="276" r="8" fill="#7c3aed"/>
  <text x="958" y="279" text-anchor="middle" font-size="7" font-weight="700" fill="#fff">M</text>
  <text x="972" y="280" font-size="10" font-weight="700" fill="#4c1d95">MLflow Tracking</text>

  <g filter="url(#sh)">
    <rect x="940" y="306" width="210" height="40" rx="8" fill="url(#cW)" stroke="#c4b5fd" stroke-width="1"/>
    <rect x="940" y="306" width="210" height="3" rx="8" ry="2" fill="#7c3aed"/>
  </g>
  <circle cx="958" cy="324" r="8" fill="#7c3aed"/>
  <text x="958" y="327" text-anchor="middle" font-size="7" font-weight="700" fill="#fff">G</text>
  <text x="972" y="328" font-size="10" font-weight="700" fill="#4c1d95">GCS Model Registry</text>

  <!-- Arrows: training cards → model card -->
  <line x1="268" y1="303" x2="286" y2="303" stroke="#c4b5fd" stroke-width="1.5" stroke-dasharray="4,3"/>
  <line x1="744" y1="303" x2="770" y2="303" stroke="#7c3aed" stroke-width="2" marker-end="url(#aP)"/>
  <!-- Arrow: model → registry -->
  <line x1="920" y1="303" x2="940" y2="303" stroke="#7c3aed" stroke-width="1.8" marker-end="url(#aP)"/>
  <!-- Converge arrows from 3 training modes -->
  <path d="M158 348 L158 362 Q158 366 163 366 L760 366 Q766 366 766 360 L766 348" stroke="#7c3aed" stroke-width="1.5" fill="none" stroke-dasharray="5,3"/>
  <path d="M396 348 L396 358 Q396 362 401 362 L760 362 Q766 362 766 354" stroke="#7c3aed" stroke-width="1.5" fill="none" stroke-dasharray="5,3"/>
  <path d="M634 348 L634 354 Q634 358 639 358 L760 358 Q766 358 766 352" stroke="#7c3aed" stroke-width="1.5" fill="none" stroke-dasharray="5,3"/>

  <!-- ============================================================= -->
  <!-- VERTICAL ARROW: Training → Inference                           -->
  <!-- ============================================================= -->
  <path d="M600 400 L600 420" stroke="#7c3aed" stroke-width="2" marker-end="url(#aP)" fill="none"/>

  <!-- ============================================================= -->
  <!-- ROW 3: INFERENCE API (Blue) y=423..560                         -->
  <!-- ============================================================= -->
  <g filter="url(#sh-lg)">
    <rect x="24" y="423" width="1152" height="137" rx="12" fill="url(#gBlue)" stroke="#bfdbfe" stroke-width="1.2"/>
    <rect x="24" y="423" width="1152" height="5" rx="12" ry="2" fill="#3b82f6"/>
  </g>
  <text x="600" y="443" text-anchor="middle" font-size="12" font-weight="700" fill="#1e40af" letter-spacing="1">INFERENCE API</text>

  <!-- Card: FastAPI Server -->
  <g filter="url(#sh)">
    <rect x="48" y="453" width="340" height="95" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="48" y="453" width="340" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="70" cy="473" r="10" fill="#3b82f6"/>
  <text x="70" y="477" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">A</text>
  <text x="86" y="476" font-size="12" font-weight="700" fill="#1e40af">FastAPI Server</text>
  <text x="60" y="493" font-size="10" fill="#475569">REST API, auth, rate limiting, CORS</text>
  <text x="60" y="507" font-size="10" fill="#475569">Single, batch, and explain endpoints</text>
  <rect x="60" y="520" width="140" height="18" rx="4" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.8"/>
  <text x="66" y="533" font-size="8" fill="#1e40af" font-family="monospace">src/inference/api.py</text>

  <!-- Card: Predictor -->
  <g filter="url(#sh)">
    <rect x="430" y="453" width="340" height="95" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="430" y="453" width="340" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="452" cy="473" r="10" fill="#3b82f6"/>
  <text x="452" y="477" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">P</text>
  <text x="468" y="476" font-size="12" font-weight="700" fill="#1e40af">EfficientNet-B0 Predictor</text>
  <text x="442" y="493" font-size="10" fill="#475569">Real-time image classification</text>
  <text x="442" y="507" font-size="10" fill="#475569">Batch inference, confidence scores</text>
  <rect x="442" y="520" width="172" height="18" rx="4" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.8"/>
  <text x="448" y="533" font-size="8" fill="#1e40af" font-family="monospace">src/inference/predictor.py</text>

  <!-- Card: Grad-CAM -->
  <g filter="url(#sh)">
    <rect x="812" y="453" width="340" height="95" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="812" y="453" width="340" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="834" cy="473" r="10" fill="#3b82f6"/>
  <text x="834" y="477" text-anchor="middle" font-size="9" font-weight="700" fill="#fff">E</text>
  <text x="850" y="476" font-size="12" font-weight="700" fill="#1e40af">Grad-CAM Explainer</text>
  <text x="824" y="493" font-size="10" fill="#475569">Visual heatmap explanations</text>
  <text x="824" y="507" font-size="10" fill="#475569">Model interpretability layer</text>
  <rect x="824" y="520" width="178" height="18" rx="4" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.8"/>
  <text x="830" y="533" font-size="8" fill="#1e40af" font-family="monospace">src/inference/explainer.py</text>

  <!-- Arrows: API → Predictor → Explainer -->
  <line x1="388" y1="500" x2="430" y2="500" stroke="#3b82f6" stroke-width="2" marker-end="url(#aB)"/>
  <line x1="770" y1="500" x2="812" y2="500" stroke="#3b82f6" stroke-width="2" marker-end="url(#aB)"/>

  <!-- ============================================================= -->
  <!-- VERTICAL ARROW: Inference → Deploy/Monitor                     -->
  <!-- ============================================================= -->
  <path d="M350 560 L350 582" stroke="#3b82f6" stroke-width="2" marker-end="url(#aB)" fill="none"/>
  <path d="M850 560 L850 582" stroke="#ea580c" stroke-width="2" marker-end="url(#aO)" fill="none"/>

  <!-- ============================================================= -->
  <!-- ROW 4 LEFT: CLOUD DEPLOYMENT (Blue) y=585..740                 -->
  <!-- ============================================================= -->
  <g filter="url(#sh-lg)">
    <rect x="24" y="585" width="555" height="155" rx="12" fill="url(#gBlue)" stroke="#bfdbfe" stroke-width="1.2"/>
    <rect x="24" y="585" width="555" height="5" rx="12" ry="2" fill="#3b82f6"/>
  </g>
  <text x="301" y="605" text-anchor="middle" font-size="12" font-weight="700" fill="#1e40af" letter-spacing="1">CLOUD DEPLOYMENT</text>

  <!-- Card: Docker -->
  <g filter="url(#sh)">
    <rect x="40" y="615" width="165" height="112" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="40" y="615" width="165" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="58" cy="634" r="9" fill="#3b82f6"/>
  <text x="58" y="637" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">D</text>
  <text x="72" y="637" font-size="11" font-weight="700" fill="#1e40af">Docker</text>
  <text x="52" y="653" font-size="9" fill="#475569">Multi-stage build</text>
  <text x="52" y="666" font-size="9" fill="#475569">Optimized images</text>
  <rect x="52" y="694" width="110" height="17" rx="3" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.8"/>
  <text x="58" y="706" font-size="7" fill="#1e40af" font-family="monospace">docker/Dockerfile</text>

  <!-- Card: Cloud Run -->
  <g filter="url(#sh)">
    <rect x="218" y="615" width="165" height="112" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="218" y="615" width="165" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="236" cy="634" r="9" fill="#3b82f6"/>
  <text x="236" y="637" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">R</text>
  <text x="250" y="637" font-size="11" font-weight="700" fill="#1e40af">Cloud Run</text>
  <text x="230" y="653" font-size="9" fill="#475569">Serverless deploy</text>
  <text x="230" y="666" font-size="9" fill="#475569">Auto-scaling, 0 to N</text>

  <!-- Card: Terraform -->
  <g filter="url(#sh)">
    <rect x="396" y="615" width="165" height="112" rx="8" fill="url(#cW)" stroke="#bfdbfe" stroke-width="1"/>
    <rect x="396" y="615" width="165" height="4" rx="8" ry="2" fill="#3b82f6"/>
  </g>
  <circle cx="414" cy="634" r="9" fill="#3b82f6"/>
  <text x="414" y="637" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">T</text>
  <text x="428" y="637" font-size="11" font-weight="700" fill="#1e40af">Terraform IaC</text>
  <text x="408" y="653" font-size="9" fill="#475569">Modular infrastructure</text>
  <text x="408" y="666" font-size="9" fill="#475569">Reproducible deploys</text>
  <rect x="408" y="694" width="72" height="17" rx="3" fill="#eff6ff" stroke="#bfdbfe" stroke-width="0.8"/>
  <text x="414" y="706" font-size="7" fill="#1e40af" font-family="monospace">terraform/</text>

  <!-- Deployment internal arrows -->
  <line x1="205" y1="671" x2="218" y2="671" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#aB)"/>
  <line x1="383" y1="671" x2="396" y2="671" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#aB)"/>

  <!-- ============================================================= -->
  <!-- ROW 4 RIGHT: MONITORING (Orange) y=585..740                    -->
  <!-- ============================================================= -->
  <g filter="url(#sh-lg)">
    <rect x="597" y="585" width="579" height="155" rx="12" fill="url(#gOrange)" stroke="#fed7aa" stroke-width="1.2"/>
    <rect x="597" y="585" width="579" height="5" rx="12" ry="2" fill="#ea580c"/>
  </g>
  <text x="886" y="605" text-anchor="middle" font-size="12" font-weight="700" fill="#7c2d12" letter-spacing="1">MONITORING</text>

  <!-- Card: Prometheus -->
  <g filter="url(#sh)">
    <rect x="613" y="615" width="172" height="112" rx="8" fill="url(#cW)" stroke="#fed7aa" stroke-width="1"/>
    <rect x="613" y="615" width="172" height="4" rx="8" ry="2" fill="#ea580c"/>
  </g>
  <circle cx="631" cy="634" r="9" fill="#ea580c"/>
  <text x="631" y="637" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">P</text>
  <text x="645" y="637" font-size="11" font-weight="700" fill="#7c2d12">Prometheus</text>
  <text x="625" y="653" font-size="9" fill="#475569">12+ custom metrics</text>
  <text x="625" y="666" font-size="9" fill="#475569">Latency, accuracy, drift</text>
  <rect x="625" y="694" width="130" height="17" rx="3" fill="#fff7ed" stroke="#fed7aa" stroke-width="0.8"/>
  <text x="631" y="706" font-size="7" fill="#7c2d12" font-family="monospace">configs/prometheus.yml</text>

  <!-- Card: Grafana -->
  <g filter="url(#sh)">
    <rect x="800" y="615" width="172" height="112" rx="8" fill="url(#cW)" stroke="#fed7aa" stroke-width="1"/>
    <rect x="800" y="615" width="172" height="4" rx="8" ry="2" fill="#ea580c"/>
  </g>
  <circle cx="818" cy="634" r="9" fill="#ea580c"/>
  <text x="818" y="637" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">G</text>
  <text x="832" y="637" font-size="11" font-weight="700" fill="#7c2d12">Grafana</text>
  <text x="812" y="653" font-size="9" fill="#475569">Real-time dashboards</text>
  <text x="812" y="666" font-size="9" fill="#475569">Alerting rules</text>
  <rect x="812" y="694" width="100" height="17" rx="3" fill="#fff7ed" stroke="#fed7aa" stroke-width="0.8"/>
  <text x="818" y="706" font-size="7" fill="#7c2d12" font-family="monospace">configs/grafana/</text>

  <!-- Card: Drift Detection -->
  <g filter="url(#sh)">
    <rect x="987" y="615" width="172" height="112" rx="8" fill="url(#cW)" stroke="#fed7aa" stroke-width="1"/>
    <rect x="987" y="615" width="172" height="4" rx="8" ry="2" fill="#ea580c"/>
  </g>
  <circle cx="1005" cy="634" r="9" fill="#ea580c"/>
  <text x="1005" y="637" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">S</text>
  <text x="1019" y="637" font-size="11" font-weight="700" fill="#7c2d12">Drift Detection</text>
  <text x="999" y="653" font-size="9" fill="#475569">Data quality monitor</text>
  <text x="999" y="666" font-size="9" fill="#475569">Shadow predictions</text>
  <rect x="999" y="694" width="142" height="17" rx="3" fill="#fff7ed" stroke="#fed7aa" stroke-width="0.8"/>
  <text x="1005" y="706" font-size="7" fill="#7c2d12" font-family="monospace">src/inference/shadow.py</text>

  <!-- Monitoring internal arrows -->
  <line x1="785" y1="671" x2="800" y2="671" stroke="#ea580c" stroke-width="1.5" marker-end="url(#aO)"/>
  <line x1="972" y1="671" x2="987" y2="671" stroke="#ea580c" stroke-width="1.5" marker-end="url(#aO)"/>

  <!-- ============================================================= -->
  <!-- CI/CD RIBBON (Red) — bottom bar instead of sidebar             -->
  <!-- ============================================================= -->
  <g filter="url(#sh-lg)">
    <rect x="24" y="755" width="1152" height="80" rx="12" fill="url(#gRed)" stroke="#fca5a5" stroke-width="1.2"/>
    <rect x="24" y="755" width="1152" height="5" rx="12" ry="2" fill="#dc2626"/>
  </g>
  <text x="600" y="774" text-anchor="middle" font-size="12" font-weight="700" fill="#991b1b" letter-spacing="1">CI/CD — GITHUB ACTIONS</text>

  <!-- CI card -->
  <g filter="url(#sh)">
    <rect x="48" y="783" width="340" height="40" rx="8" fill="url(#cW)" stroke="#fca5a5" stroke-width="1"/>
    <rect x="48" y="783" width="340" height="3" rx="8" ry="2" fill="#dc2626"/>
  </g>
  <circle cx="66" cy="803" r="9" fill="#dc2626"/>
  <text x="66" y="807" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">CI</text>
  <text x="82" y="806" font-size="10" font-weight="700" fill="#991b1b">Continuous Integration</text>
  <text x="210" y="806" font-size="9" fill="#475569">— Lint, test, type-check, security scan</text>

  <!-- CD card -->
  <g filter="url(#sh)">
    <rect x="410" y="783" width="340" height="40" rx="8" fill="url(#cW)" stroke="#fca5a5" stroke-width="1"/>
    <rect x="410" y="783" width="340" height="3" rx="8" ry="2" fill="#dc2626"/>
  </g>
  <circle cx="428" cy="803" r="9" fill="#dc2626"/>
  <text x="428" y="807" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">CD</text>
  <text x="444" y="806" font-size="10" font-weight="700" fill="#991b1b">Continuous Delivery</text>
  <text x="565" y="806" font-size="9" fill="#475569">— Build, push, deploy, smoke test</text>

  <!-- Training Pipeline card -->
  <g filter="url(#sh)">
    <rect x="772" y="783" width="380" height="40" rx="8" fill="url(#cW)" stroke="#fca5a5" stroke-width="1"/>
    <rect x="772" y="783" width="380" height="3" rx="8" ry="2" fill="#dc2626"/>
  </g>
  <circle cx="790" cy="803" r="9" fill="#dc2626"/>
  <text x="790" y="807" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">T</text>
  <text x="806" y="806" font-size="10" font-weight="700" fill="#991b1b">Model Training</text>
  <text x="905" y="806" font-size="9" fill="#475569">— Vertex AI trigger, validation, registry</text>

  <!-- CI/CD arrows down from deploy section (subtle, vertical) -->
  <path d="M301 740 L301 755" stroke="#dc2626" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#aR)" fill="none"/>
  <path d="M886 740 L886 755" stroke="#dc2626" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#aR)" fill="none"/>

  <!-- ============================================================= -->
  <!-- FOOTER: Tech Stack Badges                                      -->
  <!-- ============================================================= -->
  <line x1="40" y1="845" x2="1160" y2="845" stroke="#e2e8f0" stroke-width="1"/>
  <text x="600" y="863" text-anchor="middle" font-size="10" font-weight="600" fill="#64748b" letter-spacing="1">TECH STACK</text>

  <rect x="78" y="872" width="62" height="22" rx="6" fill="#3776ab"/>
  <text x="109" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Python</text>

  <rect x="148" y="872" width="65" height="22" rx="6" fill="#ee4c2c"/>
  <text x="180" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">PyTorch</text>

  <rect x="221" y="872" width="62" height="22" rx="6" fill="#059669"/>
  <text x="252" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">FastAPI</text>

  <rect x="291" y="872" width="60" height="22" rx="6" fill="#2496ed"/>
  <text x="321" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Docker</text>

  <rect x="359" y="872" width="76" height="22" rx="6" fill="#7c3aed"/>
  <text x="397" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Terraform</text>

  <rect x="443" y="872" width="48" height="22" rx="6" fill="#ea580c"/>
  <text x="467" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">GCP</text>

  <rect x="499" y="872" width="82" height="22" rx="6" fill="#e6522c"/>
  <text x="540" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Prometheus</text>

  <rect x="589" y="872" width="62" height="22" rx="6" fill="#f46800"/>
  <text x="620" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Grafana</text>

  <rect x="659" y="872" width="46" height="22" rx="6" fill="#13adc7"/>
  <text x="682" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">DVC</text>

  <rect x="713" y="872" width="58" height="22" rx="6" fill="#0194e2"/>
  <text x="742" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">MLflow</text>

  <rect x="779" y="872" width="102" height="22" rx="6" fill="#24292f"/>
  <text x="830" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">GitHub Actions</text>

  <rect x="889" y="872" width="82" height="22" rx="6" fill="#4c1d95"/>
  <text x="930" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">EfficientNet</text>

  <rect x="979" y="872" width="72" height="22" rx="6" fill="#ff4b4b"/>
  <text x="1015" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Streamlit</text>

  <rect x="1059" y="872" width="60" height="22" rx="6" fill="#4285f4"/>
  <text x="1089" y="887" text-anchor="middle" font-size="9" font-weight="600" fill="#fff">Vertex AI</text>

  <!-- Flow Legend (compact, under tech stack) -->

  <!-- Credit -->
  <text x="1152" y="897" text-anchor="end" font-size="7" fill="#cbd5e1">AI Product Photo Detector — Architecture v1.0</text>
</svg>
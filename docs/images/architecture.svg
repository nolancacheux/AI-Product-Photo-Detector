<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" font-family="Inter, -apple-system, system-ui, sans-serif">
  <defs>
    <!-- Modern gradients -->
    <linearGradient id="bgGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#f8fafc"/>
      <stop offset="100%" stop-color="#e2e8f0"/>
    </linearGradient>
    <linearGradient id="blueGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#3b82f6"/>
      <stop offset="100%" stop-color="#2563eb"/>
    </linearGradient>
    <linearGradient id="greenGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#22c55e"/>
      <stop offset="100%" stop-color="#16a34a"/>
    </linearGradient>
    <linearGradient id="orangeGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#f97316"/>
      <stop offset="100%" stop-color="#ea580c"/>
    </linearGradient>
    <linearGradient id="purpleGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#a855f7"/>
      <stop offset="100%" stop-color="#9333ea"/>
    </linearGradient>
    <linearGradient id="redGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#ef4444"/>
      <stop offset="100%" stop-color="#dc2626"/>
    </linearGradient>
    <linearGradient id="grayGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#64748b"/>
      <stop offset="100%" stop-color="#475569"/>
    </linearGradient>
    
    <!-- Arrow markers -->
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M0,0 L10,5 L0,10 Z" fill="#64748b"/>
    </marker>
    <marker id="arrowBlue" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M0,0 L10,5 L0,10 Z" fill="#3b82f6"/>
    </marker>
    <marker id="arrowGreen" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M0,0 L10,5 L0,10 Z" fill="#22c55e"/>
    </marker>
    <marker id="arrowOrange" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M0,0 L10,5 L0,10 Z" fill="#f97316"/>
    </marker>
    <marker id="arrowPurple" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M0,0 L10,5 L0,10 Z" fill="#a855f7"/>
    </marker>
    
    <!-- Shadow filter -->
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="116%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-opacity="0.1"/>
    </filter>
    <filter id="shadowLight" x="-2%" y="-2%" width="104%" height="108%">
      <feDropShadow dx="0" dy="1" stdDeviation="2" flood-opacity="0.08"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1200" height="900" fill="url(#bgGrad)"/>

  <!-- Title -->
  <text x="600" y="35" text-anchor="middle" font-size="22" font-weight="700" fill="#1e293b">ğŸ¤– AI Product Photo Detector â€” System Architecture</text>
  <text x="600" y="55" text-anchor="middle" font-size="11" fill="#64748b">EfficientNet-B0 Binary Classifier | FastAPI + Streamlit | GCP Cloud Run | Vertex AI | MLflow + DVC</text>

  <!-- ================================================================ -->
  <!-- ROW 1: SOURCE & CI/CD PIPELINE -->
  <!-- ================================================================ -->
  
  <!-- Source Section -->
  <g filter="url(#shadow)">
    <rect x="20" y="75" width="180" height="110" rx="12" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
    <rect x="20" y="75" width="180" height="32" rx="12" fill="url(#grayGrad)"/>
    <rect x="20" y="95" width="180" height="12" fill="url(#grayGrad)"/>
    <text x="110" y="96" text-anchor="middle" font-size="11" font-weight="600" fill="#fff">ğŸ“¦ SOURCE</text>
    <text x="110" y="130" text-anchor="middle" font-size="10" font-weight="600" fill="#334155">GitHub Repository</text>
    <text x="110" y="148" text-anchor="middle" font-size="8" fill="#64748b">nolancacheux/</text>
    <text x="110" y="161" text-anchor="middle" font-size="8" fill="#64748b">AI-Product-Photo-Detector</text>
    <text x="110" y="178" text-anchor="middle" font-size="8" fill="#94a3b8">Push â†’ Triggers CI/CD</text>
  </g>

  <!-- Arrow Source â†’ CI -->
  <line x1="200" y1="130" x2="225" y2="130" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- CI Pipeline Section -->
  <g filter="url(#shadow)">
    <rect x="235" y="75" width="440" height="110" rx="12" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
    <rect x="235" y="75" width="440" height="32" rx="12" fill="url(#blueGrad)"/>
    <rect x="235" y="95" width="440" height="12" fill="url(#blueGrad)"/>
    <text x="455" y="96" text-anchor="middle" font-size="11" font-weight="600" fill="#fff">ğŸ”„ CI PIPELINE (GitHub Actions - ci.yml)</text>
    
    <!-- CI Stages -->
    <rect x="250" y="118" width="70" height="28" rx="6" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1"/>
    <text x="285" y="136" text-anchor="middle" font-size="8" font-weight="600" fill="#1d4ed8">ğŸ” Lint</text>
    <text x="285" y="148" text-anchor="middle" font-size="7" fill="#3b82f6">Ruff</text>
    
    <line x1="320" y1="132" x2="330" y2="132" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrowBlue)"/>
    
    <rect x="335" y="118" width="70" height="28" rx="6" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1"/>
    <text x="370" y="136" text-anchor="middle" font-size="8" font-weight="600" fill="#1d4ed8">ğŸ“ Types</text>
    <text x="370" y="148" text-anchor="middle" font-size="7" fill="#3b82f6">mypy</text>
    
    <line x1="405" y1="132" x2="415" y2="132" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrowBlue)"/>
    
    <rect x="420" y="118" width="70" height="28" rx="6" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1"/>
    <text x="455" y="136" text-anchor="middle" font-size="8" font-weight="600" fill="#1d4ed8">ğŸ§ª Tests</text>
    <text x="455" y="148" text-anchor="middle" font-size="7" fill="#3b82f6">pytest</text>
    
    <line x1="490" y1="132" x2="500" y2="132" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrowBlue)"/>
    
    <rect x="505" y="118" width="80" height="28" rx="6" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1"/>
    <text x="545" y="136" text-anchor="middle" font-size="8" font-weight="600" fill="#1d4ed8">ğŸ”’ Security</text>
    <text x="545" y="148" text-anchor="middle" font-size="6" fill="#3b82f6">CodeQL, Trivy, pip-audit</text>
    
    <line x1="585" y1="132" x2="595" y2="132" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arrowBlue)"/>
    
    <rect x="600" y="118" width="60" height="28" rx="6" fill="#dbeafe" stroke="#93c5fd" stroke-width="1"/>
    <text x="630" y="136" text-anchor="middle" font-size="8" font-weight="600" fill="#1d4ed8">ğŸ³ Build</text>
    <text x="630" y="148" text-anchor="middle" font-size="7" fill="#3b82f6">Docker</text>
    
    <text x="455" y="175" text-anchor="middle" font-size="8" fill="#94a3b8">Automated quality gates on every push/PR</text>
  </g>

  <!-- Arrow CI â†’ CD -->
  <line x1="675" y1="130" x2="700" y2="130" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- CD Pipeline Section -->
  <g filter="url(#shadow)">
    <rect x="710" y="75" width="470" height="110" rx="12" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
    <rect x="710" y="75" width="470" height="32" rx="12" fill="url(#greenGrad)"/>
    <rect x="710" y="95" width="470" height="12" fill="url(#greenGrad)"/>
    <text x="945" y="96" text-anchor="middle" font-size="11" font-weight="600" fill="#fff">ğŸš€ CD PIPELINE (GitHub Actions - cd.yml)</text>
    
    <!-- CD Stages -->
    <rect x="725" y="118" width="85" height="28" rx="6" fill="#f0fdf4" stroke="#bbf7d0" stroke-width="1"/>
    <text x="768" y="136" text-anchor="middle" font-size="8" font-weight="600" fill="#15803d">ğŸ“¦ Build</text>
    <text x="768" y="148" text-anchor="middle" font-size="7" fill="#22c55e">Docker Image</text>
    
    <line x1="810" y1="132" x2="822" y2="132" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowGreen)"/>
    
    <rect x="830" y="118" width="90" height="28" rx="6" fill="#f0fdf4" stroke="#bbf7d0" stroke-width="1"/>
    <text x="875" y="136" text-anchor="middle" font-size="8" font-weight="600" fill="#15803d">ğŸ“¤ Push</text>
    <text x="875" y="148" text-anchor="middle" font-size="7" fill="#22c55e">Artifact Registry</text>
    
    <line x1="920" y1="132" x2="932" y2="132" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowGreen)"/>
    
    <rect x="940" y="118" width="85" height="28" rx="6" fill="#f0fdf4" stroke="#bbf7d0" stroke-width="1"/>
    <text x="983" y="136" text-anchor="middle" font-size="8" font-weight="600" fill="#15803d">ğŸ­ Staging</text>
    <text x="983" y="148" text-anchor="middle" font-size="7" fill="#22c55e">Cloud Run</text>
    
    <line x1="1025" y1="132" x2="1037" y2="132" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowGreen)"/>
    
    <rect x="1045" y="118" width="60" height="28" rx="6" fill="#f0fdf4" stroke="#bbf7d0" stroke-width="1"/>
    <text x="1075" y="136" text-anchor="middle" font-size="8" font-weight="600" fill="#15803d">ğŸ’¨ Smoke</text>
    <text x="1075" y="148" text-anchor="middle" font-size="7" fill="#22c55e">Test</text>
    
    <line x1="1105" y1="132" x2="1117" y2="132" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowGreen)"/>
    
    <rect x="1125" y="118" width="45" height="28" rx="6" fill="#dcfce7" stroke="#86efac" stroke-width="1"/>
    <text x="1148" y="136" text-anchor="middle" font-size="8" font-weight="600" fill="#15803d">ğŸ­ Prod</text>
    <text x="1148" y="148" text-anchor="middle" font-size="6" fill="#22c55e">Deploy</text>
    
    <text x="945" y="175" text-anchor="middle" font-size="8" fill="#94a3b8">Staging â†’ Smoke Test â†’ Production (Cloud Run)</text>
  </g>

  <!-- ================================================================ -->
  <!-- ROW 2: 3 DEVELOPMENT MODES -->
  <!-- ================================================================ -->
  
  <text x="600" y="210" text-anchor="middle" font-size="14" font-weight="700" fill="#1e293b">ğŸ› ï¸ Development & Training Modes</text>

  <!-- Local Mode -->
  <g filter="url(#shadow)">
    <rect x="20" y="225" width="370" height="160" rx="12" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
    <rect x="20" y="225" width="370" height="32" rx="12" fill="url(#orangeGrad)"/>
    <rect x="20" y="245" width="370" height="12" fill="url(#orangeGrad)"/>
    <text x="205" y="246" text-anchor="middle" font-size="11" font-weight="600" fill="#fff">ğŸ–¥ï¸ LOCAL (Docker Compose)</text>
    
    <rect x="35" y="268" width="100" height="45" rx="6" fill="#fff7ed" stroke="#fed7aa" stroke-width="1"/>
    <text x="85" y="286" text-anchor="middle" font-size="9" font-weight="600" fill="#c2410c">ğŸ“ Local Data</text>
    <text x="85" y="300" text-anchor="middle" font-size="7" fill="#f97316">data/processed/</text>
    <text x="85" y="310" text-anchor="middle" font-size="7" fill="#fb923c">DVC tracked</text>
    
    <line x1="135" y1="290" x2="150" y2="290" stroke="#f97316" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
    
    <rect x="155" y="268" width="110" height="45" rx="6" fill="#fff7ed" stroke="#fed7aa" stroke-width="1"/>
    <text x="210" y="286" text-anchor="middle" font-size="9" font-weight="600" fill="#c2410c">ğŸ³ Services</text>
    <text x="210" y="300" text-anchor="middle" font-size="7" fill="#f97316">API + UI + Prometheus</text>
    <text x="210" y="310" text-anchor="middle" font-size="7" fill="#fb923c">+ Grafana</text>
    
    <line x1="265" y1="290" x2="280" y2="290" stroke="#f97316" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
    
    <rect x="285" y="268" width="90" height="45" rx="6" fill="#ffedd5" stroke="#fdba74" stroke-width="1"/>
    <text x="330" y="286" text-anchor="middle" font-size="9" font-weight="600" fill="#c2410c">ğŸ“Š MLflow</text>
    <text x="330" y="300" text-anchor="middle" font-size="7" fill="#f97316">Experiments</text>
    <text x="330" y="310" text-anchor="middle" font-size="7" fill="#fb923c">mlruns/</text>
    
    <text x="205" y="340" text-anchor="middle" font-size="9" font-weight="500" fill="#ea580c">make up â†’ docker-compose up</text>
    <text x="205" y="355" text-anchor="middle" font-size="8" fill="#94a3b8">Best for: Development, debugging, offline work</text>
    <rect x="35" y="365" width="340" height="14" rx="4" fill="#f97316"/>
    <text x="205" y="375" text-anchor="middle" font-size="8" font-weight="600" fill="#fff">CPU/GPU â€¢ Rapid iteration â€¢ Full stack local</text>
  </g>

  <!-- Colab Mode -->
  <g filter="url(#shadow)">
    <rect x="410" y="225" width="370" height="160" rx="12" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
    <rect x="410" y="225" width="370" height="32" rx="12" fill="#fbbf24"/>
    <rect x="410" y="245" width="370" height="12" fill="#fbbf24"/>
    <text x="595" y="246" text-anchor="middle" font-size="11" font-weight="600" fill="#78350f">ğŸ“’ GOOGLE COLAB (Notebook)</text>
    
    <rect x="425" y="268" width="105" height="45" rx="6" fill="#fef9c3" stroke="#fde047" stroke-width="1"/>
    <text x="478" y="286" text-anchor="middle" font-size="9" font-weight="600" fill="#a16207">ğŸ¤— HuggingFace</text>
    <text x="478" y="300" text-anchor="middle" font-size="7" fill="#ca8a04">Dataset Hub</text>
    <text x="478" y="310" text-anchor="middle" font-size="7" fill="#eab308">cifake-dataset</text>
    
    <line x1="530" y1="290" x2="545" y2="290" stroke="#eab308" stroke-width="1.5"/>
    
    <rect x="550" y="268" width="105" height="45" rx="6" fill="#fef9c3" stroke="#fde047" stroke-width="1"/>
    <text x="603" y="286" text-anchor="middle" font-size="9" font-weight="600" fill="#a16207">â˜ï¸ T4 GPU</text>
    <text x="603" y="300" text-anchor="middle" font-size="7" fill="#ca8a04">Free tier</text>
    <text x="603" y="310" text-anchor="middle" font-size="7" fill="#eab308">16GB VRAM</text>
    
    <line x1="655" y1="290" x2="670" y2="290" stroke="#eab308" stroke-width="1.5"/>
    
    <rect x="675" y="268" width="90" height="45" rx="6" fill="#fef3c7" stroke="#fcd34d" stroke-width="1"/>
    <text x="720" y="286" text-anchor="middle" font-size="9" font-weight="600" fill="#a16207">ğŸ’¾ Export</text>
    <text x="720" y="300" text-anchor="middle" font-size="7" fill="#ca8a04">best_model.pt</text>
    <text x="720" y="310" text-anchor="middle" font-size="7" fill="#eab308">â†’ Download</text>
    
    <text x="595" y="340" text-anchor="middle" font-size="9" font-weight="500" fill="#b45309">notebooks/colab_training.ipynb</text>
    <text x="595" y="355" text-anchor="middle" font-size="8" fill="#94a3b8">Best for: Free GPU, quick experiments, sharing</text>
    <rect x="425" y="365" width="340" height="14" rx="4" fill="#fbbf24"/>
    <text x="595" y="375" text-anchor="middle" font-size="8" font-weight="600" fill="#78350f">Free T4 â€¢ Notebook UI â€¢ Interactive training</text>
  </g>

  <!-- Production / Vertex AI Mode -->
  <g filter="url(#shadow)">
    <rect x="800" y="225" width="380" height="160" rx="12" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
    <rect x="800" y="225" width="380" height="32" rx="12" fill="url(#redGrad)"/>
    <rect x="800" y="245" width="380" height="12" fill="url(#redGrad)"/>
    <text x="990" y="246" text-anchor="middle" font-size="11" font-weight="600" fill="#fff">ğŸ­ PRODUCTION (GCP + Vertex AI)</text>
    
    <rect x="815" y="268" width="85" height="45" rx="6" fill="#fef2f2" stroke="#fecaca" stroke-width="1"/>
    <text x="858" y="286" text-anchor="middle" font-size="9" font-weight="600" fill="#b91c1c">â˜ï¸ GCS</text>
    <text x="858" y="300" text-anchor="middle" font-size="7" fill="#dc2626">Data bucket</text>
    <text x="858" y="310" text-anchor="middle" font-size="6" fill="#ef4444">gs://ai-product...</text>
    
    <line x1="900" y1="290" x2="915" y2="290" stroke="#ef4444" stroke-width="1.5"/>
    
    <rect x="920" y="268" width="110" height="45" rx="6" fill="#fef2f2" stroke="#fecaca" stroke-width="1"/>
    <text x="975" y="286" text-anchor="middle" font-size="9" font-weight="600" fill="#b91c1c">ğŸ”¥ Vertex AI</text>
    <text x="975" y="300" text-anchor="middle" font-size="7" fill="#dc2626">Custom Training Job</text>
    <text x="975" y="310" text-anchor="middle" font-size="7" fill="#ef4444">T4 GPU</text>
    
    <line x1="1030" y1="290" x2="1045" y2="290" stroke="#ef4444" stroke-width="1.5"/>
    
    <rect x="1050" y="268" width="115" height="45" rx="6" fill="#fee2e2" stroke="#fca5a5" stroke-width="1"/>
    <text x="1108" y="286" text-anchor="middle" font-size="9" font-weight="600" fill="#b91c1c">ğŸš¦ Quality Gate</text>
    <text x="1108" y="300" text-anchor="middle" font-size="7" fill="#dc2626">Accâ‰¥0.85 F1â‰¥0.80</text>
    <text x="1108" y="310" text-anchor="middle" font-size="7" fill="#ef4444">â†’ Auto Deploy</text>
    
    <text x="990" y="340" text-anchor="middle" font-size="9" font-weight="500" fill="#dc2626">model-training.yml â†’ vertex_submit.py</text>
    <text x="990" y="355" text-anchor="middle" font-size="8" fill="#94a3b8">Best for: Production training, CI/CD, reproducibility</text>
    <rect x="815" y="365" width="350" height="14" rx="4" fill="url(#redGrad)"/>
    <text x="990" y="375" text-anchor="middle" font-size="8" font-weight="600" fill="#fff">Automated â€¢ GPU T4 â€¢ Quality gates â€¢ Auto-deploy</text>
  </g>

  <!-- ================================================================ -->
  <!-- ROW 3: ML PIPELINE (Vertex AI Detail) -->
  <!-- ================================================================ -->
  
  <g filter="url(#shadow)">
    <rect x="20" y="400" width="1160" height="100" rx="12" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
    <rect x="20" y="400" width="1160" height="32" rx="12" fill="url(#purpleGrad)"/>
    <rect x="20" y="420" width="1160" height="12" fill="url(#purpleGrad)"/>
    <text x="600" y="421" text-anchor="middle" font-size="11" font-weight="600" fill="#fff">ğŸ”¬ ML PIPELINE (Vertex AI - model-training.yml)</text>
    
    <!-- Pipeline stages -->
    <rect x="40" y="445" width="130" height="40" rx="6" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="105" y="463" text-anchor="middle" font-size="9" font-weight="600" fill="#7c3aed">ğŸ“Š Data Validation</text>
    <text x="105" y="477" text-anchor="middle" font-size="7" fill="#a78bfa">Class balance, integrity</text>
    
    <line x1="170" y1="465" x2="195" y2="465" stroke="#a855f7" stroke-width="2" marker-end="url(#arrowPurple)"/>
    
    <rect x="205" y="445" width="145" height="40" rx="6" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="278" y="463" text-anchor="middle" font-size="9" font-weight="600" fill="#7c3aed">ğŸ³ Build Training Image</text>
    <text x="278" y="477" text-anchor="middle" font-size="7" fill="#a78bfa">Dockerfile.training</text>
    
    <line x1="350" y1="465" x2="375" y2="465" stroke="#a855f7" stroke-width="2" marker-end="url(#arrowPurple)"/>
    
    <rect x="385" y="445" width="165" height="40" rx="6" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="468" y="463" text-anchor="middle" font-size="9" font-weight="600" fill="#7c3aed">ğŸ”¥ Submit GPU Training</text>
    <text x="468" y="477" text-anchor="middle" font-size="7" fill="#a78bfa">NVIDIA T4 â€¢ EfficientNet-B0</text>
    
    <line x1="550" y1="465" x2="575" y2="465" stroke="#a855f7" stroke-width="2" marker-end="url(#arrowPurple)"/>
    
    <rect x="585" y="445" width="140" height="40" rx="6" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="655" y="463" text-anchor="middle" font-size="9" font-weight="600" fill="#7c3aed">ğŸ“ˆ Evaluate Model</text>
    <text x="655" y="477" text-anchor="middle" font-size="7" fill="#a78bfa">Accuracy, F1, Precision</text>
    
    <line x1="725" y1="465" x2="750" y2="465" stroke="#a855f7" stroke-width="2" marker-end="url(#arrowPurple)"/>
    
    <rect x="760" y="445" width="155" height="40" rx="6" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="838" y="463" text-anchor="middle" font-size="9" font-weight="600" fill="#7c3aed">ğŸš¦ Quality Gate Check</text>
    <text x="838" y="477" text-anchor="middle" font-size="7" fill="#a78bfa">Accâ‰¥0.85 F1â‰¥0.80?</text>
    
    <line x1="915" y1="465" x2="940" y2="465" stroke="#a855f7" stroke-width="2" marker-end="url(#arrowPurple)"/>
    
    <rect x="950" y="445" width="140" height="40" rx="6" fill="#ede9fe" stroke="#c4b5fd" stroke-width="1"/>
    <text x="1020" y="463" text-anchor="middle" font-size="9" font-weight="600" fill="#7c3aed">ğŸš€ Conditional Deploy</text>
    <text x="1020" y="477" text-anchor="middle" font-size="7" fill="#a78bfa">â†’ Cloud Run (if pass)</text>
    
    <rect x="1100" y="445" width="70" height="40" rx="6" fill="#fef2f2" stroke="#fecaca" stroke-width="1"/>
    <text x="1135" y="463" text-anchor="middle" font-size="8" font-weight="600" fill="#dc2626">âŒ Fail</text>
    <text x="1135" y="477" text-anchor="middle" font-size="7" fill="#ef4444">Alert team</text>
  </g>

  <!-- ================================================================ -->
  <!-- ROW 4: INFERENCE & DATA -->
  <!-- ================================================================ -->
  
  <!-- Inference Section -->
  <g filter="url(#shadow)">
    <rect x="20" y="515" width="680" height="175" rx="12" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
    <rect x="20" y="515" width="680" height="32" rx="12" fill="url(#blueGrad)"/>
    <rect x="20" y="535" width="680" height="12" fill="url(#blueGrad)"/>
    <text x="360" y="536" text-anchor="middle" font-size="11" font-weight="600" fill="#fff">âš¡ INFERENCE LAYER (Cloud Run)</text>
    
    <!-- FastAPI Box -->
    <rect x="35" y="560" width="240" height="120" rx="8" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1"/>
    <text x="155" y="580" text-anchor="middle" font-size="10" font-weight="600" fill="#1d4ed8">ğŸš€ FastAPI API</text>
    
    <rect x="50" y="590" width="95" height="22" rx="4" fill="#fff" stroke="#93c5fd" stroke-width="1"/>
    <text x="98" y="605" text-anchor="middle" font-size="8" fill="#3b82f6">POST /predict</text>
    
    <rect x="155" y="590" width="105" height="22" rx="4" fill="#fff" stroke="#93c5fd" stroke-width="1"/>
    <text x="208" y="605" text-anchor="middle" font-size="8" fill="#3b82f6">POST /predict/batch</text>
    
    <rect x="50" y="618" width="105" height="22" rx="4" fill="#fff" stroke="#93c5fd" stroke-width="1"/>
    <text x="103" y="633" text-anchor="middle" font-size="8" fill="#3b82f6">POST /predict/explain</text>
    
    <rect x="165" y="618" width="95" height="22" rx="4" fill="#fff" stroke="#93c5fd" stroke-width="1"/>
    <text x="213" y="633" text-anchor="middle" font-size="8" fill="#3b82f6">GET /health</text>
    
    <text x="155" y="660" text-anchor="middle" font-size="7" fill="#64748b">Rate limiting â€¢ API Key â€¢ CORS â€¢ Pydantic</text>
    <text x="155" y="673" text-anchor="middle" font-size="7" fill="#94a3b8">structlog â€¢ Request ID tracing</text>
    
    <!-- Arrow API â†’ Model -->
    <line x1="275" y1="620" x2="295" y2="620" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowBlue)"/>
    
    <!-- Model Box -->
    <rect x="305" y="560" width="160" height="120" rx="8" fill="#dbeafe" stroke="#93c5fd" stroke-width="1"/>
    <text x="385" y="580" text-anchor="middle" font-size="10" font-weight="600" fill="#1d4ed8">ğŸ§  EfficientNet-B0</text>
    
    <rect x="320" y="592" width="130" height="35" rx="4" fill="#fff" stroke="#60a5fa" stroke-width="1"/>
    <text x="385" y="608" text-anchor="middle" font-size="8" font-weight="500" fill="#2563eb">Binary Classifier</text>
    <text x="385" y="620" text-anchor="middle" font-size="7" fill="#3b82f6">Real vs AI-Generated</text>
    
    <rect x="320" y="633" width="130" height="35" rx="4" fill="#fff" stroke="#60a5fa" stroke-width="1"/>
    <text x="385" y="649" text-anchor="middle" font-size="8" font-weight="500" fill="#2563eb">GradCAM</text>
    <text x="385" y="661" text-anchor="middle" font-size="7" fill="#3b82f6">Explainability heatmaps</text>
    
    <!-- Arrow Model â†’ Streamlit -->
    <line x1="465" y1="620" x2="485" y2="620" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowBlue)"/>
    
    <!-- Streamlit Box -->
    <rect x="495" y="560" width="190" height="120" rx="8" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1"/>
    <text x="590" y="580" text-anchor="middle" font-size="10" font-weight="600" fill="#1d4ed8">ğŸ¨ Streamlit UI</text>
    
    <text x="590" y="600" text-anchor="middle" font-size="8" fill="#3b82f6">ğŸ“¤ Image upload</text>
    <text x="590" y="616" text-anchor="middle" font-size="8" fill="#3b82f6">ğŸ”¥ GradCAM visualization</text>
    <text x="590" y="632" text-anchor="middle" font-size="8" fill="#3b82f6">ğŸ“Š Confidence display</text>
    <text x="590" y="648" text-anchor="middle" font-size="8" fill="#3b82f6">ğŸ—œï¸ Auto-compress images</text>
    <text x="590" y="673" text-anchor="middle" font-size="7" fill="#94a3b8">streamlit_app.py</text>
  </g>

  <!-- Data Management Section -->
  <g filter="url(#shadow)">
    <rect x="720" y="515" width="460" height="175" rx="12" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
    <rect x="720" y="515" width="460" height="32" rx="12" fill="url(#greenGrad)"/>
    <rect x="720" y="535" width="460" height="12" fill="url(#greenGrad)"/>
    <text x="950" y="536" text-anchor="middle" font-size="11" font-weight="600" fill="#fff">ğŸ“¦ DATA & MODEL MANAGEMENT</text>
    
    <!-- DVC -->
    <rect x="735" y="560" width="130" height="60" rx="6" fill="#f0fdf4" stroke="#bbf7d0" stroke-width="1"/>
    <text x="800" y="580" text-anchor="middle" font-size="9" font-weight="600" fill="#15803d">ğŸ“‚ DVC</text>
    <text x="800" y="595" text-anchor="middle" font-size="7" fill="#22c55e">Data versioning</text>
    <text x="800" y="608" text-anchor="middle" font-size="7" fill="#4ade80">dvc.yaml pipeline</text>
    
    <line x1="865" y1="590" x2="885" y2="590" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowGreen)"/>
    
    <!-- GCS -->
    <rect x="895" y="560" width="130" height="60" rx="6" fill="#f0fdf4" stroke="#bbf7d0" stroke-width="1"/>
    <text x="960" y="580" text-anchor="middle" font-size="9" font-weight="600" fill="#15803d">â˜ï¸ GCS Bucket</text>
    <text x="960" y="595" text-anchor="middle" font-size="7" fill="#22c55e">train/val/test splits</text>
    <text x="960" y="608" text-anchor="middle" font-size="6" fill="#4ade80">gs://ai-product-detector</text>
    
    <line x1="1025" y1="590" x2="1045" y2="590" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arrowGreen)"/>
    
    <!-- Model artifacts -->
    <rect x="1055" y="560" width="110" height="60" rx="6" fill="#dcfce7" stroke="#86efac" stroke-width="1"/>
    <text x="1110" y="580" text-anchor="middle" font-size="9" font-weight="600" fill="#15803d">ğŸ’¾ Artifacts</text>
    <text x="1110" y="595" text-anchor="middle" font-size="7" fill="#22c55e">best_model.pt</text>
    <text x="1110" y="608" text-anchor="middle" font-size="7" fill="#4ade80">checkpoints/</text>
    
    <!-- MLflow -->
    <rect x="735" y="630" width="205" height="50" rx="6" fill="#f0fdf4" stroke="#bbf7d0" stroke-width="1"/>
    <text x="838" y="650" text-anchor="middle" font-size="9" font-weight="600" fill="#15803d">ğŸ“Š MLflow Model Registry</text>
    <text x="838" y="665" text-anchor="middle" font-size="7" fill="#22c55e">Experiments â€¢ Params â€¢ Metrics â€¢ Artifacts â†’ GCS</text>
    
    <!-- Data validation -->
    <rect x="955" y="630" width="210" height="50" rx="6" fill="#f0fdf4" stroke="#bbf7d0" stroke-width="1"/>
    <text x="1060" y="650" text-anchor="middle" font-size="9" font-weight="600" fill="#15803d">âœ… Data Validation</text>
    <text x="1060" y="665" text-anchor="middle" font-size="7" fill="#22c55e">Class balance â€¢ Corrupt check â€¢ Resolution stats</text>
  </g>

  <!-- ================================================================ -->
  <!-- ROW 5: MONITORING -->
  <!-- ================================================================ -->
  
  <g filter="url(#shadow)">
    <rect x="20" y="705" width="1160" height="130" rx="12" fill="#fff" stroke="#e2e8f0" stroke-width="1"/>
    <rect x="20" y="705" width="1160" height="32" rx="12" fill="url(#purpleGrad)"/>
    <rect x="20" y="725" width="1160" height="12" fill="url(#purpleGrad)"/>
    <text x="600" y="726" text-anchor="middle" font-size="11" font-weight="600" fill="#fff">ğŸ“Š MONITORING & OBSERVABILITY</text>
    
    <!-- Prometheus -->
    <rect x="40" y="750" width="200" height="75" rx="8" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="140" y="770" text-anchor="middle" font-size="10" font-weight="600" fill="#7c3aed">ğŸ”¥ Prometheus</text>
    <text x="140" y="788" text-anchor="middle" font-size="8" fill="#a78bfa">predictions_total</text>
    <text x="140" y="802" text-anchor="middle" font-size="8" fill="#a78bfa">prediction_latency_seconds</text>
    <text x="140" y="816" text-anchor="middle" font-size="8" fill="#a78bfa">model_loaded, batch_size</text>
    
    <line x1="240" y1="788" x2="265" y2="788" stroke="#a855f7" stroke-width="2" marker-end="url(#arrowPurple)"/>
    
    <!-- Grafana -->
    <rect x="275" y="750" width="270" height="75" rx="8" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="410" y="770" text-anchor="middle" font-size="10" font-weight="600" fill="#7c3aed">ğŸ“ˆ Grafana Dashboards</text>
    
    <rect x="290" y="783" width="70" height="20" rx="4" fill="#ede9fe" stroke="#c4b5fd" stroke-width="1"/>
    <text x="325" y="797" text-anchor="middle" font-size="7" font-weight="500" fill="#7c3aed">ğŸš€ API</text>
    
    <rect x="368" y="783" width="70" height="20" rx="4" fill="#ede9fe" stroke="#c4b5fd" stroke-width="1"/>
    <text x="403" y="797" text-anchor="middle" font-size="7" font-weight="500" fill="#7c3aed">ğŸ§  Model</text>
    
    <rect x="446" y="783" width="85" height="20" rx="4" fill="#ede9fe" stroke="#c4b5fd" stroke-width="1"/>
    <text x="489" y="797" text-anchor="middle" font-size="7" font-weight="500" fill="#7c3aed">ğŸ—ï¸ Infra</text>
    
    <text x="410" y="820" text-anchor="middle" font-size="7" fill="#94a3b8">monitoring/grafana/dashboards/</text>
    
    <line x1="545" y1="788" x2="570" y2="788" stroke="#a855f7" stroke-width="2" marker-end="url(#arrowPurple)"/>
    
    <!-- Alerting -->
    <rect x="580" y="750" width="200" height="75" rx="8" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="680" y="770" text-anchor="middle" font-size="10" font-weight="600" fill="#7c3aed">ğŸš¨ Alerting Rules</text>
    <text x="680" y="788" text-anchor="middle" font-size="8" fill="#a78bfa">High latency (>2s)</text>
    <text x="680" y="802" text-anchor="middle" font-size="8" fill="#a78bfa">Error rate spike (>5%)</text>
    <text x="680" y="816" text-anchor="middle" font-size="8" fill="#a78bfa">Service down alerts</text>
    
    <line x1="780" y1="788" x2="805" y2="788" stroke="#a855f7" stroke-width="2" marker-end="url(#arrowPurple)"/>
    
    <!-- Drift Detection -->
    <rect x="815" y="750" width="200" height="75" rx="8" fill="#fef2f2" stroke="#fecaca" stroke-width="1"/>
    <text x="915" y="770" text-anchor="middle" font-size="10" font-weight="600" fill="#dc2626">ğŸ¯ Drift Detection</text>
    <text x="915" y="788" text-anchor="middle" font-size="8" fill="#f87171">Probability distribution shift</text>
    <text x="915" y="802" text-anchor="middle" font-size="8" fill="#f87171">Low confidence ratio</text>
    <text x="915" y="816" text-anchor="middle" font-size="8" fill="#f87171">drift_score gauge â†’ alerts</text>
    
    <!-- Logging -->
    <rect x="1025" y="750" width="145" height="75" rx="8" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="1098" y="770" text-anchor="middle" font-size="10" font-weight="600" fill="#7c3aed">ğŸ“ Logging</text>
    <text x="1098" y="788" text-anchor="middle" font-size="8" fill="#a78bfa">structlog JSON</text>
    <text x="1098" y="802" text-anchor="middle" font-size="8" fill="#a78bfa">Request ID tracing</text>
    <text x="1098" y="816" text-anchor="middle" font-size="8" fill="#a78bfa">Correlation IDs</text>
  </g>

  <!-- ================================================================ -->
  <!-- LEGEND -->
  <!-- ================================================================ -->
  
  <rect x="20" y="850" width="1160" height="40" rx="8" fill="#fff" stroke="#e2e8f0" stroke-width="1" filter="url(#shadowLight)"/>
  
  <rect x="40" y="862" width="16" height="16" rx="3" fill="url(#blueGrad)"/>
  <text x="62" y="874" font-size="9" fill="#334155">CI/Inference</text>
  
  <rect x="140" y="862" width="16" height="16" rx="3" fill="url(#greenGrad)"/>
  <text x="162" y="874" font-size="9" fill="#334155">CD/Data</text>
  
  <rect x="225" y="862" width="16" height="16" rx="3" fill="url(#orangeGrad)"/>
  <text x="247" y="874" font-size="9" fill="#334155">Local Dev</text>
  
  <rect x="310" y="862" width="16" height="16" rx="3" fill="#fbbf24"/>
  <text x="332" y="874" font-size="9" fill="#334155">Colab</text>
  
  <rect x="380" y="862" width="16" height="16" rx="3" fill="url(#redGrad)"/>
  <text x="402" y="874" font-size="9" fill="#334155">Production/Vertex</text>
  
  <rect x="500" y="862" width="16" height="16" rx="3" fill="url(#purpleGrad)"/>
  <text x="522" y="874" font-size="9" fill="#334155">ML Pipeline/Monitoring</text>
  
  <line x1="650" y1="870" x2="680" y2="870" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="690" y="874" font-size="9" fill="#334155">Data flow</text>
  
  <line x1="770" y1="870" x2="800" y2="870" stroke="#a855f7" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrowPurple)"/>
  <text x="810" y="874" font-size="9" fill="#334155">ML/Model flow</text>
  
  <text x="950" y="874" font-size="8" fill="#94a3b8">EfficientNet-B0 â€¢ FastAPI â€¢ Streamlit â€¢ GCP â€¢ Vertex AI â€¢ MLflow â€¢ DVC â€¢ Prometheus â€¢ Grafana</text>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 950" fill="none">
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#94a3b8"/>
    </marker>
    <marker id="arrow-blue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#3b82f6"/>
    </marker>
    <marker id="arrow-green" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#059669"/>
    </marker>
    <marker id="arrow-purple" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#7c3aed"/>
    </marker>
    <marker id="arrow-orange" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#ea580c"/>
    </marker>
    <marker id="arrow-red" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#dc2626"/>
    </marker>
    <filter id="shadow" x="-2%" y="-2%" width="104%" height="104%">
      <feDropShadow dx="0" dy="1" stdDeviation="3" flood-color="#000" flood-opacity="0.08"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1400" height="950" fill="#f8fafc" rx="0"/>
  <!-- Top accent bar -->
  <rect x="0" y="0" width="1400" height="4" fill="#3b82f6" opacity="0.6"/>

  <!-- Subtle grid -->
  <g opacity="0.25" stroke="#e2e8f0" stroke-width="0.5">
    <line x1="0" y1="100" x2="1400" y2="100"/>
    <line x1="0" y1="200" x2="1400" y2="200"/>
    <line x1="0" y1="300" x2="1400" y2="300"/>
    <line x1="0" y1="400" x2="1400" y2="400"/>
    <line x1="0" y1="500" x2="1400" y2="500"/>
    <line x1="0" y1="600" x2="1400" y2="600"/>
    <line x1="0" y1="700" x2="1400" y2="700"/>
    <line x1="0" y1="800" x2="1400" y2="800"/>
  </g>

  <!-- Title -->
  <text x="700" y="42" text-anchor="middle" fill="#0f172a" font-family="system-ui, -apple-system, sans-serif" font-size="26" font-weight="700">AI Product Photo Detector — Full MLOps Pipeline</text>
  <rect x="430" y="52" width="540" height="2.5" rx="1.25" fill="#3b82f6" opacity="0.5"/>

  <!-- ════════════════════════════════════════════════════════════════ -->
  <!-- ROW 1: DATA PIPELINE                                          -->
  <!-- ════════════════════════════════════════════════════════════════ -->
  <text x="50" y="90" fill="#64748b" font-family="system-ui, sans-serif" font-size="13" font-weight="600" letter-spacing="2">DATA PIPELINE</text>
  <line x1="50" y1="97" x2="210" y2="97" stroke="#cbd5e1" stroke-width="1"/>

  <!-- CIFAKE Dataset -->
  <g filter="url(#shadow)">
    <rect x="50" y="112" width="200" height="110" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="50" y="112" width="200" height="6" rx="3" fill="#3b82f6"/>
  <text x="150" y="142" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">CIFAKE Dataset</text>
  <text x="150" y="162" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">HuggingFace / Kaggle</text>
  <rect x="70" y="176" width="160" height="24" rx="4" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1"/>
  <text x="150" y="192" text-anchor="middle" fill="#2563eb" font-family="monospace" font-size="10">CIFAR-10 + SD v1.4</text>

  <!-- Arrow → DVC -->
  <line x1="250" y1="167" x2="300" y2="167" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- DVC -->
  <g filter="url(#shadow)">
    <rect x="310" y="112" width="180" height="110" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="310" y="112" width="180" height="6" rx="3" fill="#7c3aed"/>
  <text x="400" y="142" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">DVC</text>
  <text x="400" y="162" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Data Version Control</text>
  <rect x="330" y="176" width="140" height="24" rx="4" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
  <text x="400" y="192" text-anchor="middle" fill="#6d28d9" font-family="monospace" font-size="10">dvc repro</text>

  <!-- Arrow → GCS -->
  <line x1="490" y1="167" x2="540" y2="167" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- GCS Bucket -->
  <g filter="url(#shadow)">
    <rect x="550" y="112" width="200" height="110" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="550" y="112" width="200" height="6" rx="3" fill="#0284c7"/>
  <text x="650" y="142" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">GCS Bucket</text>
  <text x="650" y="162" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Google Cloud Storage</text>
  <rect x="570" y="176" width="160" height="24" rx="4" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
  <text x="650" y="192" text-anchor="middle" fill="#0369a1" font-family="monospace" font-size="10">DVC remote + models</text>

  <!-- ════════════════════════════════════════════════════════════════ -->
  <!-- ROW 2: TRAINING                                                -->
  <!-- ════════════════════════════════════════════════════════════════ -->
  <text x="50" y="255" fill="#64748b" font-family="system-ui, sans-serif" font-size="13" font-weight="600" letter-spacing="2">TRAINING</text>
  <line x1="50" y1="262" x2="150" y2="262" stroke="#cbd5e1" stroke-width="1"/>

  <!-- Arrow from DVC down -->
  <path d="M 400 222 L 400 240 L 160 240 L 160 272" stroke="#3b82f6" stroke-width="1.5" fill="none" marker-end="url(#arrow-blue)" stroke-dasharray="6,3"/>

  <!-- PyTorch Training -->
  <g filter="url(#shadow)">
    <rect x="50" y="280" width="230" height="120" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="50" y="280" width="230" height="6" rx="3" fill="#059669"/>
  <text x="165" y="312" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">PyTorch Training</text>
  <text x="165" y="332" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">EfficientNet-B0 (Transfer Learning)</text>
  <text x="165" y="350" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Data Augmentation + Cosine LR</text>
  <rect x="75" y="362" width="180" height="22" rx="4" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="1"/>
  <text x="165" y="377" text-anchor="middle" fill="#047857" font-family="monospace" font-size="10">Binary Classification</text>

  <!-- Arrow → MLflow -->
  <line x1="280" y1="340" x2="340" y2="340" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- MLflow -->
  <g filter="url(#shadow)">
    <rect x="350" y="280" width="220" height="120" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="350" y="280" width="220" height="6" rx="3" fill="#7c3aed"/>
  <text x="460" y="312" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">MLflow Tracking</text>
  <text x="460" y="332" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Experiments, Params, Metrics</text>
  <text x="460" y="350" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Model Registry &amp; Artifacts</text>
  <rect x="385" y="362" width="150" height="22" rx="4" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
  <text x="460" y="377" text-anchor="middle" fill="#6d28d9" font-family="monospace" font-size="10">mlruns/ + SQLite</text>

  <!-- Arrow → Checkpoint -->
  <line x1="570" y1="340" x2="630" y2="340" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Model Checkpoint -->
  <g filter="url(#shadow)">
    <rect x="640" y="280" width="210" height="120" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="640" y="280" width="210" height="6" rx="3" fill="#059669"/>
  <text x="745" y="312" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">Model Checkpoint</text>
  <text x="745" y="332" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">best_model.pt</text>
  <text x="745" y="350" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Val Accuracy: 82.9%</text>
  <rect x="672" y="362" width="146" height="22" rx="4" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="1"/>
  <text x="745" y="377" text-anchor="middle" fill="#047857" font-family="monospace" font-size="10">F1 / Precision</text>

  <!-- ════════════════════════════════════════════════════════════════ -->
  <!-- ROW 3: CI/CD PIPELINE                                          -->
  <!-- ════════════════════════════════════════════════════════════════ -->
  <text x="50" y="435" fill="#64748b" font-family="system-ui, sans-serif" font-size="13" font-weight="600" letter-spacing="2">CI/CD PIPELINE</text>
  <line x1="50" y1="442" x2="210" y2="442" stroke="#cbd5e1" stroke-width="1"/>

  <!-- GitHub Actions -->
  <g filter="url(#shadow)">
    <rect x="50" y="460" width="220" height="120" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="50" y="460" width="220" height="6" rx="3" fill="#1e293b"/>
  <text x="160" y="492" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">GitHub Actions</text>
  <text x="160" y="512" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">CI: Lint (ruff) + Tests (pytest)</text>
  <text x="160" y="530" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">CD: Build &amp; Deploy on push</text>
  <rect x="75" y="542" width="170" height="22" rx="4" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
  <text x="160" y="557" text-anchor="middle" fill="#475569" font-family="monospace" font-size="10">ci.yml + deploy.yml</text>

  <!-- Arrow → Docker -->
  <line x1="270" y1="520" x2="330" y2="520" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Docker Build -->
  <g filter="url(#shadow)">
    <rect x="340" y="460" width="210" height="120" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="340" y="460" width="210" height="6" rx="3" fill="#0284c7"/>
  <text x="445" y="492" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">Docker Build</text>
  <text x="445" y="512" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Multi-stage Dockerfile</text>
  <text x="445" y="530" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Non-root user, health checks</text>
  <rect x="365" y="542" width="160" height="22" rx="4" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
  <text x="445" y="557" text-anchor="middle" fill="#0369a1" font-family="monospace" font-size="10">python:3.11-slim</text>

  <!-- Arrow → Artifact Registry -->
  <line x1="550" y1="520" x2="610" y2="520" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Artifact Registry -->
  <g filter="url(#shadow)">
    <rect x="620" y="460" width="230" height="120" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="620" y="460" width="230" height="6" rx="3" fill="#0284c7"/>
  <text x="735" y="492" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">Artifact Registry</text>
  <text x="735" y="512" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">GCP Container Registry</text>
  <text x="735" y="530" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">europe-west1-docker.pkg.dev</text>
  <rect x="655" y="542" width="160" height="22" rx="4" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
  <text x="735" y="557" text-anchor="middle" fill="#0369a1" font-family="monospace" font-size="10">:latest + :sha</text>

  <!-- Arrow → Cloud Run -->
  <line x1="850" y1="520" x2="910" y2="520" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Cloud Run -->
  <g filter="url(#shadow)">
    <rect x="920" y="460" width="230" height="120" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="920" y="460" width="230" height="6" rx="3" fill="#059669"/>
  <text x="1035" y="492" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">Cloud Run</text>
  <text x="1035" y="512" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Serverless Deployment</text>
  <text x="1035" y="530" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Auto-scaling 0→3 instances</text>
  <rect x="955" y="542" width="160" height="22" rx="4" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="1"/>
  <text x="1035" y="557" text-anchor="middle" fill="#047857" font-family="monospace" font-size="10">europe-west1</text>

  <!-- Terraform badge next to Cloud Run -->
  <g filter="url(#shadow)">
    <rect x="1190" y="475" width="160" height="90" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="1190" y="475" width="160" height="6" rx="3" fill="#7c3aed"/>
  <text x="1270" y="505" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="13" font-weight="700">Terraform</text>
  <text x="1270" y="523" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="10">IaC for GCP infra</text>
  <rect x="1210" y="535" width="120" height="20" rx="4" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
  <text x="1270" y="549" text-anchor="middle" fill="#6d28d9" font-family="monospace" font-size="9">GCS + AR + CR</text>
  <!-- Arrow Terraform → Cloud Run -->
  <line x1="1190" y1="520" x2="1155" y2="520" stroke="#7c3aed" stroke-width="1.2" marker-end="url(#arrow-purple)" stroke-dasharray="4,3"/>

  <!-- ════════════════════════════════════════════════════════════════ -->
  <!-- ROW 4: INFERENCE (CLIENT → CLOUD RUN → MODEL → RESPONSE)       -->
  <!-- ════════════════════════════════════════════════════════════════ -->
  <text x="50" y="620" fill="#64748b" font-family="system-ui, sans-serif" font-size="13" font-weight="600" letter-spacing="2">INFERENCE</text>
  <line x1="50" y1="627" x2="160" y2="627" stroke="#cbd5e1" stroke-width="1"/>

  <!-- Client -->
  <g filter="url(#shadow)">
    <rect x="50" y="645" width="180" height="100" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="50" y="645" width="180" height="6" rx="3" fill="#ea580c"/>
  <text x="140" y="677" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">Client</text>
  <text x="140" y="697" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">cURL / Streamlit UI</text>
  <text x="140" y="715" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">REST API consumers</text>

  <!-- Arrow → Cloud Run API -->
  <line x1="230" y1="695" x2="300" y2="695" stroke="#ea580c" stroke-width="1.5" marker-end="url(#arrow-orange)"/>
  <text x="265" y="688" text-anchor="middle" fill="#ea580c" font-family="system-ui, sans-serif" font-size="9" font-weight="500">POST</text>

  <!-- Cloud Run API -->
  <g filter="url(#shadow)">
    <rect x="310" y="645" width="280" height="100" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="310" y="645" width="280" height="6" rx="3" fill="#0284c7"/>
  <text x="450" y="677" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">FastAPI on Cloud Run</text>
  <!-- Endpoint pills -->
  <rect x="325" y="690" width="115" height="20" rx="4" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
  <text x="382" y="704" text-anchor="middle" fill="#0369a1" font-family="monospace" font-size="9" font-weight="600">POST /predict</text>
  <rect x="450" y="690" width="125" height="20" rx="4" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
  <text x="512" y="704" text-anchor="middle" fill="#0369a1" font-family="monospace" font-size="9" font-weight="600">POST /predict/batch</text>
  <rect x="325" y="716" width="90" height="20" rx="4" fill="#f0f9ff" stroke="#bae6fd" stroke-width="0.8"/>
  <text x="370" y="730" text-anchor="middle" fill="#0369a1" font-family="monospace" font-size="9">GET /health</text>
  <rect x="425" y="716" width="90" height="20" rx="4" fill="#f0f9ff" stroke="#bae6fd" stroke-width="0.8"/>
  <text x="470" y="730" text-anchor="middle" fill="#0369a1" font-family="monospace" font-size="9">GET /drift</text>

  <!-- Arrow → Model -->
  <line x1="590" y1="695" x2="650" y2="695" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="620" y="688" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="9">infer</text>

  <!-- Model -->
  <g filter="url(#shadow)">
    <rect x="660" y="645" width="200" height="100" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="660" y="645" width="200" height="6" rx="3" fill="#059669"/>
  <text x="760" y="677" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">EfficientNet-B0</text>
  <text x="760" y="697" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Preprocess → Inference</text>
  <text x="760" y="715" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">224×224 → sigmoid → prob</text>

  <!-- Arrow → Response -->
  <line x1="860" y1="695" x2="920" y2="695" stroke="#059669" stroke-width="1.5" marker-end="url(#arrow-green)"/>

  <!-- Response -->
  <g filter="url(#shadow)">
    <rect x="930" y="645" width="220" height="100" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="930" y="645" width="220" height="6" rx="3" fill="#059669"/>
  <text x="1040" y="677" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">JSON Response</text>
  <text x="1040" y="697" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">prediction: real | ai_generated</text>
  <text x="1040" y="715" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">probability + confidence level</text>

  <!-- Connector: Model Checkpoint → Inference Model -->
  <path d="M 745 400 L 745 420 L 900 420 L 900 640 L 760 640 L 760 645" stroke="#059669" stroke-width="1.5" fill="none" marker-end="url(#arrow-green)" stroke-dasharray="6,3"/>
  <text x="910" y="530" fill="#059669" font-family="system-ui, sans-serif" font-size="10" font-weight="500" transform="rotate(90, 910, 530)">model artifact</text>

  <!-- ════════════════════════════════════════════════════════════════ -->
  <!-- ROW 5: MONITORING                                               -->
  <!-- ════════════════════════════════════════════════════════════════ -->
  <text x="50" y="788" fill="#64748b" font-family="system-ui, sans-serif" font-size="13" font-weight="600" letter-spacing="2">MONITORING</text>
  <line x1="50" y1="795" x2="185" y2="795" stroke="#cbd5e1" stroke-width="1"/>

  <!-- Arrow from FastAPI down -->
  <path d="M 450 745 L 450 760 L 200 760 L 200 810" stroke="#dc2626" stroke-width="1.5" fill="none" marker-end="url(#arrow-red)" stroke-dasharray="6,3"/>
  <text x="340" y="755" fill="#dc2626" font-family="system-ui, sans-serif" font-size="10" font-weight="500">metrics export</text>

  <!-- Prometheus Metrics -->
  <g filter="url(#shadow)">
    <rect x="50" y="815" width="260" height="110" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="50" y="815" width="260" height="6" rx="3" fill="#dc2626"/>
  <text x="180" y="845" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">Prometheus Metrics</text>
  <text x="180" y="865" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Request latency &amp; counts</text>
  <text x="180" y="883" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Prediction distributions</text>
  <rect x="80" y="893" width="200" height="20" rx="4" fill="#fef2f2" stroke="#fecaca" stroke-width="1"/>
  <text x="180" y="907" text-anchor="middle" fill="#b91c1c" font-family="monospace" font-size="10">GET /metrics</text>

  <!-- Arrow → Structured Logging -->
  <line x1="310" y1="870" x2="370" y2="870" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Structured Logging -->
  <g filter="url(#shadow)">
    <rect x="380" y="815" width="260" height="110" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="380" y="815" width="260" height="6" rx="3" fill="#ea580c"/>
  <text x="510" y="845" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">Structured Logging</text>
  <text x="510" y="865" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">JSON structured logs (structlog)</text>
  <text x="510" y="883" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Prediction confidence tracking</text>
  <rect x="420" y="893" width="180" height="20" rx="4" fill="#fff7ed" stroke="#fed7aa" stroke-width="1"/>
  <text x="510" y="907" text-anchor="middle" fill="#c2410c" font-family="monospace" font-size="10">structlog + JSON</text>

  <!-- Arrow → Drift Detection -->
  <line x1="640" y1="870" x2="700" y2="870" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Drift Detection -->
  <g filter="url(#shadow)">
    <rect x="710" y="815" width="260" height="110" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="710" y="815" width="260" height="6" rx="3" fill="#7c3aed"/>
  <text x="840" y="845" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="14" font-weight="700">Drift Detection</text>
  <text x="840" y="865" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">Distribution monitoring</text>
  <text x="840" y="883" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="11">KS Test + PSI score</text>
  <rect x="750" y="893" width="180" height="20" rx="4" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
  <text x="840" y="907" text-anchor="middle" fill="#6d28d9" font-family="monospace" font-size="10">GET /drift endpoint</text>

  <!-- Docker Compose box (right side, spanning rows 3-5) -->
  <g filter="url(#shadow)">
    <rect x="1200" y="620" width="170" height="305" rx="10" fill="#ffffff" stroke="#e2e8f0" stroke-width="1.5"/>
  </g>
  <rect x="1200" y="620" width="170" height="6" rx="3" fill="#0284c7"/>
  <text x="1285" y="648" text-anchor="middle" fill="#1e293b" font-family="system-ui, sans-serif" font-size="13" font-weight="700">Docker Compose</text>
  <text x="1285" y="666" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="10">Local dev stack</text>

  <!-- Container pills -->
  <rect x="1218" y="680" width="134" height="26" rx="5" fill="#f0f9ff" stroke="#7dd3fc" stroke-width="1"/>
  <text x="1285" y="697" text-anchor="middle" fill="#0369a1" font-family="monospace" font-size="10" font-weight="600">api (FastAPI)</text>

  <rect x="1218" y="714" width="134" height="26" rx="5" fill="#fff7ed" stroke="#fdba74" stroke-width="1"/>
  <text x="1285" y="731" text-anchor="middle" fill="#c2410c" font-family="monospace" font-size="10" font-weight="600">ui (Streamlit)</text>

  <rect x="1218" y="748" width="134" height="26" rx="5" fill="#f5f3ff" stroke="#c4b5fd" stroke-width="1"/>
  <text x="1285" y="765" text-anchor="middle" fill="#6d28d9" font-family="monospace" font-size="10" font-weight="600">mlflow-server</text>

  <line x1="1218" y1="785" x2="1352" y2="785" stroke="#e2e8f0" stroke-width="1"/>
  <text x="1285" y="805" text-anchor="middle" fill="#475569" font-family="system-ui, sans-serif" font-size="10" font-weight="600">Ports</text>
  <text x="1285" y="823" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="10">API → :8080</text>
  <text x="1285" y="839" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="10">UI → :8501</text>
  <text x="1285" y="855" text-anchor="middle" fill="#64748b" font-family="system-ui, sans-serif" font-size="10">MLflow → :5000</text>

  <rect x="1218" y="870" width="134" height="22" rx="5" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
  <text x="1285" y="885" text-anchor="middle" fill="#0369a1" font-family="monospace" font-size="9">docker compose up</text>

  <!-- Connector: Cloud Run → Inference row -->
  <path d="M 1035 580 L 1035 610 L 1035 640 L 1040 645" stroke="#059669" stroke-width="1.2" fill="none" stroke-dasharray="4,3"/>

  <!-- ════════════════════════════════════════════════════════════════ -->
  <!-- TECH TAGS FOOTER                                                -->
  <!-- ════════════════════════════════════════════════════════════════ -->
  <line x1="50" y1="938" x2="1350" y2="938" stroke="#e2e8f0" stroke-width="1"/>
  <text x="50" y="948" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10" font-weight="600" letter-spacing="1.5">TECH</text>

  <g transform="translate(100, 935)">
    <rect x="0" y="0" width="60" height="22" rx="11" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1"/>
    <text x="30" y="15" text-anchor="middle" fill="#2563eb" font-family="system-ui, sans-serif" font-size="10" font-weight="500">Python</text>

    <rect x="68" y="0" width="65" height="22" rx="11" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1"/>
    <text x="100" y="15" text-anchor="middle" fill="#2563eb" font-family="system-ui, sans-serif" font-size="10" font-weight="500">PyTorch</text>

    <rect x="141" y="0" width="85" height="22" rx="11" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="1"/>
    <text x="183" y="15" text-anchor="middle" fill="#047857" font-family="system-ui, sans-serif" font-size="10" font-weight="500">EfficientNet</text>

    <rect x="234" y="0" width="62" height="22" rx="11" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
    <text x="265" y="15" text-anchor="middle" fill="#0369a1" font-family="system-ui, sans-serif" font-size="10" font-weight="500">FastAPI</text>

    <rect x="304" y="0" width="58" height="22" rx="11" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="333" y="15" text-anchor="middle" fill="#6d28d9" font-family="system-ui, sans-serif" font-size="10" font-weight="500">MLflow</text>

    <rect x="370" y="0" width="58" height="22" rx="11" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
    <text x="399" y="15" text-anchor="middle" fill="#0369a1" font-family="system-ui, sans-serif" font-size="10" font-weight="500">Docker</text>

    <rect x="436" y="0" width="50" height="22" rx="11" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="461" y="15" text-anchor="middle" fill="#6d28d9" font-family="system-ui, sans-serif" font-size="10" font-weight="500">DVC</text>

    <rect x="494" y="0" width="58" height="22" rx="11" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
    <text x="523" y="15" text-anchor="middle" fill="#0369a1" font-family="system-ui, sans-serif" font-size="10" font-weight="500">GCP</text>

    <rect x="560" y="0" width="78" height="22" rx="11" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="1"/>
    <text x="599" y="15" text-anchor="middle" fill="#047857" font-family="system-ui, sans-serif" font-size="10" font-weight="500">Cloud Run</text>

    <rect x="646" y="0" width="72" height="22" rx="11" fill="#f5f3ff" stroke="#ddd6fe" stroke-width="1"/>
    <text x="682" y="15" text-anchor="middle" fill="#6d28d9" font-family="system-ui, sans-serif" font-size="10" font-weight="500">Terraform</text>

    <rect x="726" y="0" width="72" height="22" rx="11" fill="#fff7ed" stroke="#fed7aa" stroke-width="1"/>
    <text x="762" y="15" text-anchor="middle" fill="#c2410c" font-family="system-ui, sans-serif" font-size="10" font-weight="500">Streamlit</text>

    <rect x="806" y="0" width="70" height="22" rx="11" fill="#fef2f2" stroke="#fecaca" stroke-width="1"/>
    <text x="841" y="15" text-anchor="middle" fill="#b91c1c" font-family="system-ui, sans-serif" font-size="10" font-weight="500">structlog</text>

    <rect x="884" y="0" width="56" height="22" rx="11" fill="#f0fdf4" stroke="#bbf7d0" stroke-width="1"/>
    <text x="912" y="15" text-anchor="middle" fill="#15803d" font-family="system-ui, sans-serif" font-size="10" font-weight="500">pytest</text>

    <rect x="948" y="0" width="56" height="22" rx="11" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
    <text x="976" y="15" text-anchor="middle" fill="#475569" font-family="system-ui, sans-serif" font-size="10" font-weight="500">Ruff</text>
  </g>
</svg>